00002910 Starting Address
Assembler used: EASy68K Editor/Assembler v5.16.01
Created On: 17/01/2021 23:49:40

00000000                             1  .
00000000                             2  ; =============================================================================
00000000                             3  ; TITLE    : SUPER TENNIS
00000000                             4  ; AUTHOR   : ODILO FORTES & MARIBEL CRESPI
00000000                             5  ; HISTORY  : 10-OCT-2020 - CREATION
00000000                             6  ;            11-OCT-2020 - MINOR CHANGES
00000000                             7  ; =============================================================================
00000000                             8  
00001000                             9              ORG     $1000
00001000                            10  
00001000                            11  ; --- CODE INCLUDES -----------------------------------------------------------
00001000                            12  
00001000                            13              INCLUDE "SYSCONST.X68"          ; SYSTEM CONSTANTS
00001000                            14  ; =============================================================================
00001000                            15  ; TITLE    : SYSTEM CONSTANTS
00001000                            16  ; AUTHOR   : ANTONI BURGUERA
00001000                            17  ; HISTORY  : XX-XXX-201X - CREATION
00001000                            18  ;            11-OCT-2020 - MINOR CHANGES
00001000                            19  ; =============================================================================
00001000                            20  
00001000                            21  ; --- TRAP RELATED CONSTANTS --------------------------------------------------
00001000                            22  
00001000  =00000000                 23  KBDTRAP     EQU     0                       ; KEYBOARD UPDATE TRAP
00001000  =00000001                 24  SCRTRAP     EQU     1                       ; SCREEN REFRESH TRAP
00001000                            25  
00001000                            26  ; --- KEY CODES (EASy68K)
00001000                            27  
00001000  =00000057                 28  KBDCHRSP    EQU     'W'                     ; W KEY
00001000  =00000044                 29  KBDCHRMK    EQU     'D'                     ; D KEY
00001000  =00000041                 30  KBDCHRSH    EQU     'A'                     ; A KEY
00001000                            31  
00001000  =00000020                 32  KBDCHRPK    EQU     $20                     ; SPACE KEY
00001000                            33  
00001000  =00000025                 34  KBDCHRLF    EQU     $25                     ; LEFT KEY
00001000  =00000026                 35  KBDCHRUP    EQU     $26                     ; UP KEY
00001000  =00000027                 36  KBDCHRRT    EQU     $27                     ; RIGHT KEY
00001000                            37  
00001000  =00000028                 38  KBDCHRDN    EQU     $28                     ; DOWN KEY
00001000                            39  
00001000                            40  ; --- KEYBOARD MAPPING --------------------------------------------------------
00001000                            41  
00001000  =00000025                 42  KBDLEFT     EQU     KBDCHRLF                ; LEFT BUTTON
00001000  =00000026                 43  KBDUP       EQU     KBDCHRUP                ; UP BUTTON
00001000  =00000027                 44  KBDRIGHT    EQU     KBDCHRRT                ; RIGHT BUTTON
00001000  =00000028                 45  KBDDOWN     EQU     KBDCHRDN                ; DOWN BUTTON
00001000  =00000057                 46  KBDFIRE1    EQU     KBDCHRSP                ; UP W BUTTON
00001000  =00000044                 47  KBDFIRE2    EQU     KBDCHRMK                ; RIGHT D BUTTON
00001000  =00000041                 48  KBDFIRE3    EQU     KBDCHRSH                ; LEFT A BUTTON
00001000  =00000020                 49  KBDPAUSE    EQU     KBDCHRPK                ; PAUSE BUTTON
00001000                            50  
00001000                            51  ; --- KEYBOARD BITFIELD MASKS -------------------------------------------------
00001000                            52  ; CONVENIENCE CONSTANTS TO ACCESS THE FOLLOWING BIT-FIELD.
00001000                            53  ; THIS BIT-FIELD IS USED BY SYSTEM VARS (KBDVAL) AND (KBDEDGE).
00001000                            54  ; +---+---+---+---+---+---+---+---+
00001000                            55  ; | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
00001000                            56  ; +---+---+---+---+---+---+---+---+
00001000                            57  ;   |   |   |   |   |   |   |   |
00001000                            58  ;   |   |   |   |   |   |   |   +---------- LEFT BUTTON
00001000                            59  ;   |   |   |   |   |   |   +-------------- UP BUTTON
00001000                            60  ;   |   |   |   |   |   +------------------ RIGHT BUTTON
00001000                            61  ;   |   |   |   |   +---------------------- DOWN BUTTON
00001000                            62  ;   |   |   |   +-------------------------- FIRE 1 BUTTON
00001000                            63  ;   |   |   +------------------------------ FIRE 2 BUTTON
00001000                            64  ;   |   +---------------------------------- FIRE 3 BUTTON
00001000                            65  ;   +-------------------------------------- PAUSE BUTTON
00001000                            66  
00001000  =00000001                 67  KBDMSKLF    EQU     %00000001
00001000  =00000002                 68  KBDMSKUP    EQU     %00000010
00001000  =00000004                 69  KBDMSKRT    EQU     %00000100
00001000  =00000008                 70  KBDMSKDN    EQU     %00001000
00001000  =00000010                 71  KBDMSKF1    EQU     %00010000
00001000  =00000020                 72  KBDMSKF2    EQU     %00100000
00001000  =00000040                 73  KBDMSKF3    EQU     %01000000
00001000  =00000080                 74  KBDMSKPS    EQU     %10000000
00001000                            75  
00001000                            76  ; --- KEYBOARD BITFIELD POSITIONS ---------------------------------------------
00001000                            77  
00001000  =00000000                 78  KBDBITLF    EQU     0
00001000  =00000001                 79  KBDBITUP    EQU     1
00001000  =00000002                 80  KBDBITRT    EQU     2
00001000  =00000003                 81  KBDBITDN    EQU     3
00001000  =00000004                 82  KBDBITF1    EQU     4
00001000  =00000005                 83  KBDBITF2    EQU     5
00001000  =00000006                 84  KBDBITF3    EQU     6
00001000  =00000007                 85  KBDBITPS    EQU     7
00001000                            86  
00001000                            87  ; --- SCREEN RELATED CONSTANTS ------------------------------------------------
00001000                            88  
00001000  =00000280                 89  SCRWIDTH    EQU     640                     ; SCREEN WIDTH (PIXELS)
00001000  =000001E0                 90  SCRHEIGH    EQU     480                     ; SCREEN HEIGHT (PIXELS)
00001000  =00000001                 91  SCRIRQ      EQU     1                       ; SCREEN INTERRUPT NUMBER
00001000  =00000014                 92  SCRTIM      EQU     20                      ; SCREEN TIMER (MS)
00001000                            93  
00001000                            94  ; --- DYNAMIC MEMORY CONSTANTS ------------------------------------------------
00001000                            95  
00001000  =00000040                 96  DMMBSIZE    EQU     64                      ; BLOCK SIZE (BYTES). POWER OF TWO
00001000  =00000032                 97  DMMBNUM     EQU     50                      ; NUMBER OF BLOCKS
00001000  =00000000                 98  DMMSYSID    EQU     0                       ; SYSTEM OWNER ID (MUST BE 0)
00001000                            99  
00001000                           100  
00001000                           101  
00001000                           102  -------------------- end include --------------------
00001000                           103              INCLUDE "SYSTEM.X68"            ; SYSTEM CODE
00001000                           104  ; =============================================================================
00001000                           105  ; TITLE    : SYSTEM MANAGEMENT (SYSTEM CODE)
00001000                           106  ; AUTHOR   : ANTONI BURGUERA
00001000                           107  ; COMMENTS : IT IS DIVIDED IN THREE BLOCKS:
00001000                           108  ;            - SYS : GENERIC.
00001000                           109  ;            - SCR : SCREEN MANAGEMENT.
00001000                           110  ;            - KBD : KEYBOARD MANAGEMENT.
00001000                           111  ; HISTORY  : XX-XXX-201X - CREATION
00001000                           112  ;            11-OCT-2020 - MINOR CHANGES
00001000                           113  ; =============================================================================
00001000                           114  
00001000                           115  ; -----------------------------------------------------------------------------
00001000                           116  SYSINIT
00001000                           117  ; INITIALIZES THE SYSTEM
00001000                           118  ; INPUT    - NONE
00001000                           119  ; OUTPUT   - NONE
00001000                           120  ; MODIFIES - NONE
00001000                           121  ; -----------------------------------------------------------------------------
00001000  205F                     122              MOVE.L  (A7)+,A0                ; GET RETURN ADDRESS
00001002  4EB9 000010B4            123              JSR     KBDINIT                 ; INIT KEYBOARD
00001008  4EB9 0000101C            124              JSR     SCRINIT                 ; INIT SCREEN
0000100E  4EB9 00001114            125              JSR     DMMINIT                 ; INIT DYNAMIC MEMORY
00001014  027C DFFF                126              ANDI.W  #$DFFF,SR               ; SWITCH TO USER
00001018  2F08                     127              MOVE.L  A0,-(A7)                ; PUT RETURN ADDRESS
0000101A  4E75                     128              RTS
0000101C                           129  
0000101C                           130  ; =============================================================================
0000101C                           131  ; SCREEN MANAGEMENT (SYSTEM CODE)
0000101C                           132  ; =============================================================================
0000101C                           133  
0000101C                           134  ; -----------------------------------------------------------------------------
0000101C                           135  SCRINIT
0000101C                           136  ; INITIALIZES THE SCREEN, SCREEN-RELATED INTERRUPT AND VARS.
0000101C                           137  ; INPUT    - NONE
0000101C                           138  ; OUTPUT   - NONE
0000101C                           139  ; MODIFIES - D0,D1,D2,D3
0000101C                           140  ; -----------------------------------------------------------------------------
0000101C  007C 0700                141              ORI.W   #$0700,SR               ; DISABLE ALL INT
00001020  21FC 0000109A 0084       142              MOVE.L  #SCRUPD,($80+SCRTRAP*4) ; INSTALL TRAP
00001028  223C 028001E0            143              MOVE.L  #SCRWIDTH<<16|SCRHEIGH,D1 ; SET RESOLUTION
0000102E  103C 0021                144              MOVE.B  #33,D0
00001032  4E4F                     145              TRAP    #15
00001034  7201                     146              MOVE.L  #1,D1                   ; SET WINDOWED MODE
00001036  4E4F                     147              TRAP    #15
00001038  323C FF00                148              MOVE.W  #$FF00,D1               ; CLEAR VISIBLE BUFFER
0000103C  103C 000B                149              MOVE.B  #11,D0
00001040  4E4F                     150              TRAP    #15
00001042  123C 0011                151              MOVE.B  #17,D1                  ; ENABLE DOUBLE BUFFER
00001046  103C 005C                152              MOVE.B  #92,D0
0000104A  4E4F                     153              TRAP    #15
0000104C  323C FF00                154              MOVE.W  #$FF00,D1               ; CLEAR HIDDEN BUFFER
00001050  103C 000B                155              MOVE.B  #11,D0
00001054  4E4F                     156              TRAP    #15
00001056  21FC 0000108C 0064       157              MOVE.L  #SCRISR,($60+SCRIRQ*4)  ; SET EXCEPTION VECTOR
0000105E  123C 0005                158              MOVE.B  #5,D1                   ; ENABLE EXCEPTION PROCESSING
00001062  103C 0020                159              MOVE.B  #32,D0
00001066  4E4F                     160              TRAP    #15
00001068  143C 0081                161              MOVE.B  #%10000000|SCRIRQ,D2    ; ENABLE AUTO-IRQ
0000106C  163C 0014                162              MOVE.B  #SCRTIM,D3
00001070  123C 0006                163              MOVE.B  #6,D1
00001074  103C 0020                164              MOVE.B  #32,D0
00001078  4E4F                     165              TRAP    #15
0000107A  4239 0000293A            166              CLR.B   (SCRINTCT)              ; PREPARE INTERRUPT FLAG
00001080  4239 0000293B            167              CLR.B   (SCRCYCCT)              ; PREPARE CYCLE COUNTER
00001086  027C F8FF                168              ANDI.W  #$F8FF,SR               ; ENABLE INTS
0000108A  4E75                     169              RTS
0000108C                           170  
0000108C                           171  ; -----------------------------------------------------------------------------
0000108C                           172  SCRISR
0000108C                           173  ; SCREEN TIMER ISR. INCREASES THE INTERRUPT COUNTER AND UPDATES DOUBLE BUFFER.
0000108C                           174  ; INPUT    - NONE
0000108C                           175  ; OUTPUT   - NONE
0000108C                           176  ; MODIFIES - NONE
0000108C                           177  ; -----------------------------------------------------------------------------
0000108C  5239 0000293A            178              ADDQ.B  #1,(SCRINTCT)           ; UPDATE INT FLAG/COUNTER
00001092  5239 0000293B            179              ADDQ.B  #1,(SCRCYCCT)           ; UPDATE CYCLE COUNTER
00001098  4E73                     180              RTE
0000109A                           181  
0000109A                           182  ; -----------------------------------------------------------------------------
0000109A                           183  SCRUPD
0000109A                           184  ; TRAP SERVICE ROUTINE IN CHARGE OF VISUALIZING CURRENT FRAME AND CLEARING
0000109A                           185  ; BUFFER FOR THE NEXT ONE.
0000109A                           186  ; INPUT    - NONE
0000109A                           187  ; OUTPUT   - NONE
0000109A                           188  ; MODIFIES - NONE
0000109A                           189  ; -----------------------------------------------------------------------------
0000109A  48A7 C000                190              MOVEM.W D0-D1,-(A7)
0000109E  103C 005E                191              MOVE.B  #94,D0                  ; UPDATE DOUBLE BUFFER
000010A2  4E4F                     192              TRAP    #15
000010A4  323C FF00                193              MOVE.W  #$FF00,D1               ; CLEAR HIDDEN BUFFER
000010A8  103C 000B                194              MOVE.B  #11,D0
000010AC  4E4F                     195              TRAP    #15
000010AE  4C9F 0003                196              MOVEM.W (A7)+,D0-D1
000010B2  4E73                     197              RTE
000010B4                           198  
000010B4                           199  ; =============================================================================
000010B4                           200  ; KEYBOARD MANAGEMENT (SYSTEM CODE)
000010B4                           201  ; =============================================================================
000010B4                           202  
000010B4                           203  ; -----------------------------------------------------------------------------
000010B4                           204  KBDINIT
000010B4                           205  ; INITIALIZES THE SYSTEM VARIABLES KBDSYS AND KBDVAL
000010B4                           206  ; INPUT    - NONE
000010B4                           207  ; OUTPUT   - NONE
000010B4                           208  ; MODIFIES - NONE
000010B4                           209  ; -----------------------------------------------------------------------------
000010B4  4239 00002938            210              CLR.B   (KBDVAL)                ; INIT VARS
000010BA  4239 00002939            211              CLR.B   (KBDEDGE)
000010C0  21FC 000010CA 0080       212              MOVE.L  #KBDREAD,($80+KBDTRAP*4) ; INSTALL
000010C8  4E75                     213              RTS
000010CA                           214  
000010CA                           215  ; -----------------------------------------------------------------------------
000010CA                           216  KBDREAD
000010CA                           217  ; TRAP SERVICE ROUTINE.
000010CA                           218  ; UPDATES THE SYSTEM VARIABLES KBDEDGE AND KBDVAL ACCORDING TO THE BITFIELD
000010CA                           219  ; DESCRIBED IN SYSCONST. KBDVAL HOLDS THE CURRENT VALUES AND KBDEFGE HOLDS
000010CA                           220  ; RISING EDGES FROM PREVIOUS CALL TO THE CURRENT ONE.
000010CA                           221  ; INPUT    - NONE
000010CA                           222  ; OUTPUT   - (KBDVAL) AND (KBDEDGE)
000010CA                           223  ; MODIFIES - NONE
000010CA                           224  ; -----------------------------------------------------------------------------
000010CA  48E7 F000                225              MOVEM.L D0-D3,-(A7)
000010CE  103C 0013                226              MOVE.B  #19,D0
000010D2  223C 20414457            227              MOVE.L  #KBDPAUSE<<24+KBDFIRE3<<16+KBDFIRE2<<8+KBDFIRE1,D1
000010D8  4E4F                     228              TRAP    #15
000010DA  6100 002A                229              BSR     .STORE                  ; STORE FIRE1,FIRE2,FIRE3 AND PAUSE
000010DE  223C 28272625            230              MOVE.L  #KBDDOWN<<24+KBDRIGHT<<16+KBDUP<<8+KBDLEFT,D1
000010E4  4E4F                     231              TRAP    #15
000010E6  6100 001E                232              BSR     .STORE                  ; STORE KEY UP,DOWN,LEFT AND RIGTH.
000010EA  1039 00002938            233              MOVE.B  (KBDVAL),D0             ; COMPUTE EDGE.
000010F0  4600                     234              NOT.B   D0                      ; EDGE=NOT(PREVIOUS) AND CURRENT.
000010F2  C002                     235              AND.B   D2,D0
000010F4  13C2 00002938            236              MOVE.B  D2,(KBDVAL)             ; STORE VALUES (PRESS AND EDGE)
000010FA  13C0 00002939            237              MOVE.B  D0,(KBDEDGE)
00001100  4CDF 000F                238              MOVEM.L (A7)+,D0-D3
00001104  4E73                     239              RTE
00001106                           240  
00001106  363C 0003                241  .STORE      MOVE.W  #3,D3                   ; TRANSLATES THE 8-BIT ENCODING
0000110A  E189                     242  .LOOP       LSL.L   #8,D1                   ; OF TRAP #15 TASK 19 INTO A 1-BIT
0000110C  E312                     243              ROXL.B  #1,D2                   ; PER KEYPRESS ENCODING
0000110E  51CB FFFA                244              DBRA.W  D3,.LOOP
00001112  4E75                     245              RTS
00001114                           246  
00001114                           247  ; =============================================================================
00001114                           248  ; DYNAMIC MEMORY MANAGEMENT (SYSTEM CODE)
00001114                           249  ; DYNAMIC MEMORY IS A SET OF DMMBNUM SLOTS OF DMMBSIZE BYTES EACH ONE.
00001114                           250  ; DMMBSIZE MUST BE POWER OF TWO. A SLOT HAS:
00001114                           251  ; - HEADER - 1 WORD. SPECIFIES THE OWNER (0 MEANS OWNED BY SYSTEM)
00001114                           252  ; - DATA   - DMMBSIZE - 2 BYTES. MAY CONTAIN VARS AND ANY KIND OF DATA RELATED
00001114                           253  ;            THE THE OWNER. IF OWNER==0, DATA IS MEANINGLESS.
00001114                           254  ; =============================================================================
00001114                           255  
00001114                           256  ; -----------------------------------------------------------------------------
00001114                           257  DMMINIT
00001114                           258  ; INITIALIZES THE DYNAMIC MEMORY TO ALL OWNED BY SYSTEM.
00001114                           259  ; INPUT    - NONE
00001114                           260  ; OUTPUT   - NONE
00001114                           261  ; MODIFIES - NONE
00001114                           262  ; -----------------------------------------------------------------------------
00001114  48E7 8080                263              MOVEM.L D0/A0,-(A7)
00001118  41F9 00002940            264              LEA     DMMDATA,A0
0000111E  303C 0031                265              MOVE.W  #DMMBNUM-1,D0
00001122  30BC 0000                266  .LOOP       MOVE.W  #DMMSYSID,(A0)
00001126  D1FC 00000040            267              ADD.L   #DMMBSIZE,A0
0000112C  51C8 FFF4                268              DBRA.W  D0,.LOOP
00001130  4CDF 0101                269              MOVEM.L (A7)+,D0/A0
00001134  4E75                     270              RTS
00001136                           271  
00001136                           272  ; -----------------------------------------------------------------------------
00001136                           273  DMMFIRST
00001136                           274  ; SEARCHES THE FIRST MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001136                           275  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001136                           276  ; INPUT    - NONE
00001136                           277  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001136                           278  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001136                           279  ; -----------------------------------------------------------------------------
00001136  41F9 00002940            280              LEA     DMMDATA,A0
0000113C  4A58                     281  DMMFRLOP    TST.W   (A0)+
0000113E  6600 0016                282              BNE     DMMFRFND
00001142  D1FC 0000003E            283              ADD.L   #DMMBSIZE-2,A0
00001148  B1FC 000035BF            284  DMMFRCOM    CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
0000114E  6DEC                     285              BLT     DMMFRLOP
00001150  207C 00000000            286              MOVE.L  #0,A0
00001156  4E75                     287  DMMFRFND    RTS
00001158                           288  
00001158                           289  ; -----------------------------------------------------------------------------
00001158                           290  DMMNEXT
00001158                           291  ; SEARCHES THE NEXT MEMORY SLOT NOT OWNED BY SYSTEM AND OUTPUTS A POINTER
00001158                           292  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001158                           293  ; INPUT    - A0   : POINTER WITHIN THE CURRENT SLOT
00001158                           294  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001158                           295  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001158                           296  ; -----------------------------------------------------------------------------
00001158  2F00                     297              MOVE.L  D0,-(A7)
0000115A  2008                     298              MOVE.L  A0,D0
0000115C  C0BC FFFFFFC0            299              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
00001162  0680 00000040            300              ADD.L   #DMMBSIZE,D0
00001168  2040                     301              MOVE.L  D0,A0
0000116A  201F                     302              MOVE.L  (A7)+,D0
0000116C  60DA                     303              BRA     DMMFRCOM
0000116E                           304  
0000116E                           305  ; -----------------------------------------------------------------------------
0000116E                           306  DMMFRSTO
0000116E                           307  ; SEARCHES THE FIRST MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
0000116E                           308  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
0000116E                           309  ; INPUT    - D0.W : ID TO SEARCH
0000116E                           310  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
0000116E                           311  ; MODIFIES - NONE (ASIDE OF OUTPUT)
0000116E                           312  ; -----------------------------------------------------------------------------
0000116E  41F9 00002940            313              LEA     DMMDATA,A0
00001174  B058                     314  DMMFLOOP    CMP.W   (A0)+,D0
00001176  6700 0016                315              BEQ     DMMFFND
0000117A  D1FC 0000003E            316              ADD.L   #DMMBSIZE-2,A0
00001180  B1FC 000035BF            317  DMMFCOM     CMP.L   #DMMDATA+DMMBSIZE*DMMBNUM-1,A0
00001186  6DEC                     318              BLT     DMMFLOOP
00001188  207C 00000000            319              MOVE.L  #0,A0
0000118E  4E75                     320  DMMFFND     RTS
00001190                           321  
00001190                           322  ; -----------------------------------------------------------------------------
00001190                           323  DMMNEXTO
00001190                           324  ; SEARCHES THE NEXT MEMORY SLOT WITH THE SPECIFIED ID AND OUTPUTS A POINTER
00001190                           325  ; TO THE CORRESPONDING DATA (SLOT ADDRESS+2)
00001190                           326  ; INPUT    - D0.W : ID TO SEARCH
00001190                           327  ;            A0   : POINTER WITHIN THE CURRENT SLOT
00001190                           328  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FOUND
00001190                           329  ; MODIFIES - NONE (ASIDE OF OUTPUT)
00001190                           330  ; -----------------------------------------------------------------------------
00001190  2F00                     331              MOVE.L  D0,-(A7)
00001192  2008                     332              MOVE.L  A0,D0
00001194  C0BC FFFFFFC0            333              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
0000119A  0680 00000040            334              ADD.L   #DMMBSIZE,D0
000011A0  2040                     335              MOVE.L  D0,A0
000011A2  201F                     336              MOVE.L  (A7)+,D0
000011A4  60DA                     337              BRA     DMMFCOM
000011A6                           338  
000011A6                           339  ; -----------------------------------------------------------------------------
000011A6                           340  DMMALLOC
000011A6                           341  ; SEARCHES THE FIRST FREE (SYS OWNED) SLOT, ASSIGNS TO THE SPECIFIED OWNER
000011A6                           342  ; AND RETURNS A POINTER TO THE CORRESPONDING DATA (SLOT ADDRESS + 2)
000011A6                           343  ; INPUT    - D0.W : ID TO ASSIGN
000011A6                           344  ; OUTPUT   - A0   : POINTER TO THE DATA OR 0 IF NOT FREE SPACE
000011A6                           345  ; MODIFIES - NONE (ASIDE OF OUTPUT)
000011A6                           346  ; -----------------------------------------------------------------------------
000011A6  3F00                     347              MOVE.W  D0,-(A7)
000011A8  4240                     348              CLR.W   D0
000011AA  4EB8 116E                349              JSR     DMMFRSTO
000011AE  301F                     350              MOVE.W  (A7)+,D0
000011B0  B1FC 00000000            351              CMP.L   #0,A0
000011B6  6700 0006                352              BEQ     .END
000011BA  3140 FFFE                353              MOVE.W  D0,-2(A0)
000011BE  4E75                     354  .END        RTS
000011C0                           355  
000011C0                           356  ; -----------------------------------------------------------------------------
000011C0                           357  DMMFREE
000011C0                           358  ; FREES THE SLOT TO WHICH THE PROVIDED POINTER BELONGS BY SETTING ITS OWNED TO
000011C0                           359  ; SYSTEM (0)
000011C0                           360  ; INPUT    - A0   : POINTER BELONGING TO THE SLOT TO FREE
000011C0                           361  ; OUTPUT   - NONE
000011C0                           362  ; MODIFIES - NONE
000011C0                           363  ; -----------------------------------------------------------------------------
000011C0  48E7 8080                364              MOVEM.L D0/A0,-(A7)
000011C4  2008                     365              MOVE.L  A0,D0
000011C6  C0BC FFFFFFC0            366              AND.L   #-DMMBSIZE,D0           ; TAKE ADVANTAGE OF ALIGNMENT
000011CC  2040                     367              MOVE.L  D0,A0
000011CE  4250                     368              CLR.W   (A0)
000011D0  4CDF 0101                369              MOVEM.L (A7)+,D0/A0
000011D4  4E75                     370              RTS
000011D4  4E75                     371  -------------------- end include --------------------
000011D6                           372              INCLUDE "CONST.X68"             ; GAME CONSTANTS
000011D6                           373  ; =============================================================================
000011D6                           374  ; TITLE    : GAME CONSTANTS
000011D6                           375  ; AUTHOR   : ODILO FORTES & MARIBEL CRESPI
000011D6                           376  ; HISTORY  :
000011D6                           377  ; =============================================================================
000011D6                           378  
000011D6                           379  ; --- MAP RELATED CONSTANTS ---------------------------------------------------
000011D6                           380  
000011D6  =00EBCE87                381  BACKGCOL    EQU $00EBCE87       ; BACKGROUND COLOR (FILL AND PEN) -> CYAN.
000011D6                           382  
000011D6  =00497700                383  GRASPCOL    EQU $00497700       ; GRASS PEN COLOR -> DARK GREEN.
000011D6  =004CB122                384  GRASFCOL    EQU $004CB122       ; GRASS FILL COLOR -> LIGHT GREEN.
000011D6                           385  
000011D6  =00FFFFFF                386  LINECOL     EQU $00FFFFFF       ; WHITE COLOR FOR LINES.
000011D6                           387  
000011D6  =00000000                388  SEPAPCOL    EQU $00000000       ; SEPARATOR PEN COLOR -> BLACK
000011D6  =00405711                389  SEPAFCOL    EQU $00405711       ; SEPARATOR FILL COLOR -> DARK GREEN.
000011D6                           390  
000011D6  =00000002                391  BOUNDMAR    EQU 2               ; MARGIN OF PIXELS FROM BOUND (LOOKS GOOD).
000011D6                           392  
000011D6  =0000001E                393  GRASHEIG    EQU 30              ; GRASS HEIGHT.
000011D6                           394  
000011D6  =00000008                395  LINEWIDT    EQU 8               ; WIDTH OF THE LINES.
000011D6                           396  
000011D6  =0000000C                397  SEPAWIDT    EQU 12              ; WIDTH OF THE SEPARATOR.
000011D6  =00000078                398  SEPAHEIG    EQU 120             ; HEIGTH OF THE SEPARATOR.
000011D6                           399  
000011D6  =00000024                400  SESUWIDT    EQU 36              ; SEPARATOR SUPPORT WIDTH.
000011D6  =00000004                401  SESUHEIG    EQU 4               ; SEPARATOR SUPPORT HEIGTH.
000011D6                           402  
000011D6  =0000CCFF                403  WARN1COL    EQU $0000CCFF       ; WARNING 1 COLOR.
000011D6  =000000FF                404  WARN2COL    EQU $000000FF       ; WARNING 2 COLOR.
000011D6                           405  
000011D6                           406  ; ---   PLAYERS RELATED CONSTANTS ---------------------------------------------
000011D6                           407  
000011D6  =00000001                408  IAXEXTRA    EQU 1          ; BOOST OF SPEED FOR EVERY GOAL (IA ONLY).
000011D6                           409  
000011D6  =00000007                410  BASEXSPD    EQU 7          ; BASE SPEED STAT (IT WILL INCREASE FOR IAs)
000011D6                           411  
000011D6  =FFFFFFEC                412  PLRJMPSP    EQU -20         ; PLAYER INITIAL JUMP SPEED (NEGATIVE)
000011D6                           413  
000011D6  =0000001E                414  PLRWIDTH    EQU 30          ; WIDTH OF PLAYER.
000011D6  =0000001E                415  PLRHEIGH    EQU 30          ; HEIGTH OF PLAYER.
000011D6                           416  
000011D6                           417  ; --- PLAYER 1 ---
000011D6  =00000000                418  PLR1PCOL    EQU $00000000   ; PLAYER 1 PEN COLOR.
000011D6  =0000FF00                419  PLR1FCOL    EQU $0000FF00   ; PLAYER 1 FILL COLOR.
000011D6                           420  
000011D6                           421  ; --- PLAYER 2 ---
000011D6  =00000000                422  PLR2PCOL    EQU $00000000   ; PLAYER 2 PEN COLOR.
000011D6  =00BBBB00                423  PLR2FCOL    EQU $00BBBB00   ; PLAYER 2 FILL COLOR.
000011D6                           424  
000011D6                           425  ; ---   BALL RELATED CONSTANTS ------------------------------------------------
000011D6                           426  
000011D6  =0000000A                427  BALLRAD     EQU 10          ; BALL RADIUS.
000011D6                           428  
000011D6  =00000000                429  BALLPCOL    EQU $00000000   ; BALL PEN COLOR.
000011D6  =0000FFFF                430  BALLFCOL    EQU $0000FFFF   ; BALL FILL COLOR.
000011D6                           431  
000011D6  =00000001                432  BALLFRX     EQU 1           ; X FRICTION APPLIED ON BALL.
000011D6  =00000003                433  BALLFRY     EQU 3           ; Y FRICTION APPLIED ON BALL.
000011D6                           434  
000011D6  =0000001E                435  BALLXTOP    EQU 30          ; BALL X TOP SPEED.
000011D6  =0000001E                436  BALLYTOP    EQU 30          ; BALL Y TOP SPEED.
000011D6                           437  
000011D6                           438  ; --- SCOREBOARD RELATED CONSTANTS --------------------------------------------
000011D6                           439  ; They are technically part of map, but they are important enough as to
000011D6                           440  ; get their own space!
000011D6                           441  
000011D6  =00000000                442  SCBOPCOL    EQU $00000000   ; SCOREBOARD PEN COLOR (FOR BOTH).
000011D6  =00AAAAAA                443  SCBOFCOL    EQU $00AAAAAA   ; STANDARD INNER FOR SCOREBOARD.
000011D6  =0000FF00                444  SCBOCOL1    EQU PLR1FCOL    ; COLOR TEAM 1 (SAME AS PLAYER1).
000011D6  =00BBBB00                445  SCBOCOL2    EQU PLR2FCOL    ; COLOR TEAM 2 (SAME AS PLAYER2).
000011D6                           446  
000011D6  =0000008C                447  SCBOWIDT    EQU 140         ; SCOREBOARD WIDTH
000011D6  =0000005A                448  SCBOHEIG    EQU 90          ; SCOREBOARD HEIGH
000011D6  =00000005                449  SCBOMARG    EQU 5           ; SCOREBOARD MARGIN (FOR BETTER LOOKS)
000011D6                           450  
000011D6                           451  ; --- SCORE NUMBER RELATED CONSTANTS ------------------------------------------
000011D6                           452  
000011D6  =00000007                453  MAXSCORE    EQU 7           ; SET ONLY BETWEEN 1 AND 7
000011D6                           454  
000011D6  =003432CB                455  SCORECOL    EQU $003432CB   ; COLOR OF NUMBERS
000011D6                           456  
000011D6  =000000A0                457  BOARD1X     EQU SCRWIDTH/4      ; X COORD OF PLAYER 1 BOARD
000011D6  =000001E0                458  BOARD2X     EQU (3*SCRWIDTH)/4  ; X COORD OF PLAYER 2 BOARD
000011D6  =00000078                459  BOARDY      EQU SCRHEIGH/4      ; Y COORD OF BOTH BOARDS
000011D6                           460  
000011D6  =00000002                461  TOUCHES     EQU 2           ; IF THE BALL TOUCHES N TIMES THE GROUND OF A
000011D6                           462                              ; PLAYER (WITHOUT SENDING IT TO THE OTHER PLAYER),
000011D6                           463                              ; THEN THAT OTHER PLAYER GETS A POINT.
000011D6                           464  
000011D6                           465  ; --- INTRO RELATED CONSTANTS -------------------------------------------------
000011D6                           466  
000011D6  =00000000                467  INTBGCOL    EQU $00000000   ; INTRO BACKGROUND COLOR.
000011D6                           468  
000011D6  =000000FF                469  BARCOL      EQU $000000FF   ; OUTLINE AND PROGRESS COLOR.
000011D6  =00000000                470  BAREMPTY    EQU $00000000   ; EMPTY BAR COLOR.
000011D6                           471  
000011D6  =00000190                472  BARY        EQU SCRHEIGH-80 ; Y COORD OF THE ATTRACT MODE LOADING BAR.
000011D6                           473  
000011D6  =00000190                474  BARWIDTH    EQU 400
000011D6  =0000000A                475  BARHEIGH    EQU 10
000011D6                           476  
000011D6                           477  ; --- STATE RELATED CONSTANTS ---------------------------------------------------
000011D6                           478  
000011D6  =00000000                479  STAINTRO   EQU  0               ; INTRO STATE
000011D6  =00000001                480  STAGAME    EQU  1               ; GAME STATE
000011D6  =00000002                481  STACOUNT   EQU  2               ; AFTER GOAL STATE
000011D6  =00000003                482  STAGOVER   EQU  3               ; GAME OVER STATE
000011D6  =00000004                483  STAINFO    EQU  4               ; INFORMATION RELATED TO THE GAME STATE
000011D6                           484  
000011D6  =00000000                485  VSPLAYER   EQU  0               ; VS PLAYER MODE
000011D6  =00000001                486  VSIA       EQU  1               ; IF THE PLAYER DOESN'T HAVE FRIENDS
000011D6  =00000002                487  CHSMUSIC   EQU  2               ; IF THE PLAYER WANTS TO CHANGE THE MUSIC
000011D6  =00000003                488  ATRMODE    EQU  3               ; ATTRACT MODE
000011D6                           489  
000011D6  =00000000                490  DINHO1     EQU  0               ; IF THE PLAYER PREFERS RONALDINHO 1 MUSIC
000011D6  =00000001                491  DINHO2     EQU  1               ; IF PLAYER PREFERS RONALDINHO 2 MUSIC
000011D6  =00000002                492  MUSICPKM   EQU  2               ; MUSIC FOR THE LAST POINTS
000011D6                           493  
000011D6                           494  
000011D6                           495  
000011D6                           496  
000011D6                           497  
000011D6                           498  
000011D6                           499  
000011D6                           500  
000011D6                           501  
000011D6                           502  
000011D6                           503  
000011D6                           504  
000011D6                           505  
000011D6                           506  
000011D6                           507  
000011D6                           508  
000011D6                           509  
000011D6                           510  
000011D6                           511  
000011D6                           512  
000011D6                           513  
000011D6                           514  
000011D6                           515  
000011D6                           516  
000011D6                           517  
000011D6                           518  
000011D6                           519  
000011D6                           520  
000011D6                           521  
000011D6                           522  
000011D6                           523  -------------------- end include --------------------
000011D6                           524              
000011D6                           525              INCLUDE "STATES.X68"            ; MANEJO DE LOS ESTADOS
000011D6                           526  ; =============================================================================
000011D6                           527  ; TITLE    : GAME STATE MANAGEMENT
000011D6                           528  ; AUTHOR   : ODILO FORTES & MARIBEL CRESPI
000011D6                           529  ; HISTORY  : XX-XXX-201X - CREATION
000011D6                           530  ;            11-OCT-2020 - MINOR CHANGES
000011D6                           531  ; =============================================================================
000011D6                           532  
000011D6                           533  ; -----------------------------------------------------------------------------
000011D6                           534  STAINIT
000011D6                           535  ; INITALIZES THE STATE MANAGER
000011D6                           536  ; INPUT    - NONE
000011D6                           537  ; OUTPUT   - NONE
000011D6                           538  ; MODIFIES - NONE
000011D6                           539  ; -----------------------------------------------------------------------------
000011D6                           540  
000011D6  33FC FFFF 000035E6       541              MOVE.W #-1,(STACUR)
000011DE  33FC 0000 000035E8       542              MOVE.W #0,(STANEXT)
000011E6                           543              
000011E6  4E75                     544              RTS
000011E8                           545  
000011E8                           546  ; -----------------------------------------------------------------------------
000011E8                           547  STAUPD
000011E8                           548  ; PERFORMS STATE UPDATE AND INIT IF NECESSARY
000011E8                           549  ; INPUT    - NONE
000011E8                           550  ; OUTPUT   - NONE
000011E8                           551  ; MODIFIES - NONE
000011E8                           552  ; -----------------------------------------------------------------------------
000011E8  48E7 8080                553              MOVEM.L D0/A0,-(A7)
000011EC  4280                     554              CLR.L   D0
000011EE  3039 000035E8            555              MOVE.W  (STANEXT),D0
000011F4  B079 000035E6            556              CMP.W   (STACUR),D0
000011FA  6700 0012                557              BEQ     .DOUPD
000011FE  33C0 000035E6            558              MOVE.W  D0,(STACUR)             ; IF STATE CHANGED, DO INIT
00001204  E588                     559              LSL.L   #2,D0
00001206  2040                     560              MOVE.L  D0,A0
00001208  2068 1226                561              MOVE.L  .INITBL(A0),A0
0000120C  4E90                     562              JSR     (A0)
0000120E  4280                     563  .DOUPD      CLR.L   D0                      ; IN ANY CASE, DO UPDATE
00001210  3039 000035E6            564              MOVE.W  (STACUR),D0
00001216  E588                     565              LSL.L   #2,D0
00001218  2040                     566              MOVE.L  D0,A0
0000121A  2068 123A                567              MOVE.L  .UPDTBL(A0),A0
0000121E  4E90                     568              JSR     (A0)
00001220  4CDF 0101                569              MOVEM.L (A7)+,D0/A0
00001224  4E75                     570              RTS
00001226= 00001280 000017DC ...    571  .INITBL     DC.L    STAINTRI,STAPLAYI,STAGOLI,STAGOVRI,STAINFOI
0000123A= 000012C6 00001806 ...    572  .UPDTBL     DC.L    STAINTRU,STAPLAYU,STAGOLU,STAGOVRU,STAINFOU
0000124E                           573  
0000124E                           574       
0000124E                           575  ; -----------------------------------------------------------------------------
0000124E                           576  STAPLOT
0000124E                           577  ; PERFORMS STATE PLOT
0000124E                           578  ; INPUT    - NONE
0000124E                           579  ; OUTPUT   - NONE
0000124E                           580  ; MODIFIES - NONE
0000124E                           581  ; -----------------------------------------------------------------------------
0000124E  48E7 8080                582              MOVEM.L D0/A0,-(A7)
00001252  4280                     583              CLR.L   D0
00001254  3039 000035E6            584              MOVE.W  (STACUR),D0
0000125A  E588                     585              LSL.L   #2,D0
0000125C  2040                     586              MOVE.L  D0,A0
0000125E  2068 126A                587              MOVE.L  .PLTTBL(A0),A0
00001262  4E90                     588              JSR     (A0)
00001264  4CDF 0101                589              MOVEM.L (A7)+,D0/A0
00001268  4E75                     590              RTS
0000126A                           591              
0000126A= 00001412 00001852 ...    592  .PLTTBL     DC.L    STAINTRP,STAPLAYP,STAGOLP,STAGOVRP,STAINFOP
0000127E                           593  
0000127E                           594  ; -----------------------------------------------------------------------------
0000127E                           595  STAEMPTY
0000127E                           596  ; EMPTY SUBROUTINE FOR CASES WITH NOTHING TO DO
0000127E                           597  ; INPUT    - NONE
0000127E                           598  ; OUTPUT   - NONE
0000127E                           599  ; MODIFIES - NONE
0000127E                           600  ; NOTE     - JUST A PLACEHOLDER. NOTHING TO DO.
0000127E                           601  ; -----------------------------------------------------------------------------
0000127E  4E75                     602              RTS
00001280                           603              
00001280                           604  ; ----------------------------------------------------------------------------- 
00001280                           605  STAINTRI
00001280                           606  ; INTRO STATE INIT
00001280                           607  ; INPUT    - NONE
00001280                           608  ; OUTPUT   - NONE
00001280                           609  ; MODIFIES - NONE
00001280                           610  ; -----------------------------------------------------------------------------
00001280  4EB9 00002892            611              JSR FILWRITE
00001286  4EB9 000028CC            612              JSR FILREAD
0000128C                           613  
0000128C  4279 000035EE            614              CLR.W (ATRBAR)  ; The attract mode loading bar starts at 0. It will
00001292                           615                              ; reset even if we come from instructions or game
00001292                           616                              ; over state.
00001292                           617  
00001292  4279 000035CA            618              CLR.W (SCORE1)  ; We will init the map several times during the
00001298  4279 000035D6            619              CLR.W (SCORE2)  ; game, so we only want to clear score once.
0000129E                           620              
0000129E  33FC 0007 000035C4       621              MOVE.W #BASEXSPD,(PLR1XSPD)    ; BASEXSPD is the base speed. It
000012A6  33FC 0007 000035D0       622              MOVE.W #BASEXSPD,(PLR2XSPD)    ; only changes for IAs. They get
000012AE                           623                                             ; bonus speed when losing. But the
000012AE                           624                                             ; initial speed is the same for both
000012AE                           625                                             ; human and IA.
000012AE  4EB9 00002806            626              JSR STPSOUND
000012B4                           627  
000012B4  33FC 0001 000035EA       628              MOVE.W #VSIA,(OPTCHSD)
000012BC  33FC 0001 000035EC       629              MOVE.W #DINHO2,(MSCCHSD)
000012C4                           630              
000012C4  4E75                     631              RTS
000012C6                           632  
000012C6                           633  
000012C6                           634  ; -----------------------------------------------------------------------------
000012C6                           635  STAINTRU
000012C6                           636  ; INTRO STATE UPDATE
000012C6                           637  ; INPUT    - NONE
000012C6                           638  ; OUTPUT   - NONE
000012C6                           639  ; MODIFIES - NONE
000012C6                           640  ; -----------------------------------------------------------------------------
000012C6  0C79 0190 000035EE       641              CMP.W #BARWIDTH,(ATRBAR)
000012CE  6600 0016                642              BNE .SKIP
000012D2  33FC 0003 000035EA       643              MOVE.W #ATRMODE,(OPTCHSD)
000012DA  33FC 0002 000035E8       644              MOVE.W #STACOUNT,(STANEXT)
000012E2  6000 0078                645              BRA .END
000012E6                           646  .SKIP
000012E6  5279 000035EE            647              ADDQ.W #1,(ATRBAR)
000012EC                           648  
000012EC                           649  .NOATTRACT
000012EC  0839 0004 00002939       650              BTST.B  #KBDBITF1,(KBDEDGE)         ; W PRESSED?
000012F4  6700 000A                651              BEQ .NOINFO
000012F8  33FC 0004 000035E8       652              MOVE.W #STAINFO,(STANEXT)
00001300                           653  .NOINFO            
00001300  0C79 0002 000035EA       654              CMP #CHSMUSIC,(OPTCHSD)
00001308  6600 001A                655              BNE .NOMUSIC
0000130C                           656                 
0000130C  0839 0000 00002939       657              BTST.B #KBDBITLF,(KBDEDGE)           ; Left key pressed?
00001314  6600 0088                658              BNE .LEFT                          ; Yes: move left, No: skip.
00001318                           659  
00001318  0839 0002 00002939       660              BTST.B #KBDBITRT,(KBDEDGE)           ; Right key pressed?
00001320  6600 0098                661              BNE .RIGHT                         ; Yes: move right, No: skip.
00001324                           662  .NOMUSIC
00001324  0839 0001 00002939       663              BTST.B  #KBDBITUP,(KBDEDGE)
0000132C  6600 0030                664              BNE     .UP
00001330  0839 0003 00002939       665              BTST.B  #KBDBITDN,(KBDEDGE)
00001338  6600 0044                666              BNE     .DOWN
0000133C  0839 0007 00002939       667              BTST.B  #KBDBITPS,(KBDEDGE) ; ESPACIO
00001344  6700 0016                668              BEQ     .END
00001348  0C79 0002 000035EA       669              CMP #CHSMUSIC,(OPTCHSD)
00001350  6700 000A                670              BEQ .END                    ; NO PUEDES INICIAR SI ESTAS EN MUSICA
00001354  33FC 0002 000035E8       671              MOVE.W #STACOUNT,(STANEXT)
0000135C                           672  .END        
0000135C  4E75                     673              RTS 
0000135E                           674  
0000135E                           675  .UP         
0000135E  0C79 0001 000035EA       676              CMP.W #VSIA,(OPTCHSD)     ; SI YA ESTAS ARRIBA, NO AVANZAS
00001366  67F4                     677              BEQ .END              ; IF WE ARE YET IN THIS OPTION, WE CAN'T MOVE
00001368  4279 000035EE            678              CLR.W (ATRBAR)       ; Attract mode loading bar resets.
0000136E  0C79 0000 000035EA       679              CMP.W #VSPLAYER,(OPTCHSD) ;SI VSPLAYER ENTONCES A VSIA
00001376  6700 0076                680              BEQ .IAOPTION
0000137A  6000 007E                681              BRA .PLYOPTION          ; VSPLAYER, POR DECARTE
0000137E                           682              
0000137E                           683  .DOWN       
0000137E  0C79 0002 000035EA       684              CMP.W #CHSMUSIC,(OPTCHSD) ; If we are in music, do nothing.
00001386  67D4                     685              BEQ .END
00001388  4279 000035EE            686              CLR.W (ATRBAR)         ; Attract mode loading bar resets.
0000138E  0C79 0001 000035EA       687              CMP #VSIA,(OPTCHSD)     ; SI ESTABAS EN VSIA BAJAS A VSPLAYER
00001396  6700 0062                688              BEQ .PLYOPTION          ; CANT SCROLL MORE
0000139A  6000 006A                689              BRA .MSCOPTION         ; POR DESCARTE
0000139E                           690  
0000139E                           691  .LEFT
0000139E  4279 000035EE            692              CLR.W (ATRBAR)         ; Attract mode loading bar resets.
000013A4  0C79 0000 000035EC       693              CMP #DINHO1,(MSCCHSD)
000013AC  6700 0034                694              BEQ .CHDINHO2                ; CANT SCROLL MORE
000013B0  33FC 0000 000035EC       695              MOVE.W  #DINHO1,(MSCCHSD)
000013B8  60A2                     696              BRA .END
000013BA                           697  
000013BA                           698  .RIGHT
000013BA  4279 000035EE            699              CLR.W (ATRBAR)         ; Attract mode loading bar resets.
000013C0  0C79 0001 000035EC       700              CMP #DINHO2,(MSCCHSD)
000013C8  6700 000C                701              BEQ .CHDINHO1              ; CANT SCROLL MORE
000013CC  33FC 0001 000035EC       702              MOVE.W  #DINHO2,(MSCCHSD)
000013D4  6086                     703              BRA .END
000013D6                           704              
000013D6                           705  .CHDINHO1
000013D6  33FC 0000 000035EC       706              MOVE.W  #DINHO1,(MSCCHSD)
000013DE  6000 FF7C                707              BRA .END
000013E2                           708  
000013E2                           709  .CHDINHO2
000013E2  33FC 0001 000035EC       710              MOVE.W  #DINHO2,(MSCCHSD)
000013EA  6000 FF70                711              BRA .END            
000013EE                           712  
000013EE                           713  .IAOPTION
000013EE  33FC 0001 000035EA       714              MOVE.W #VSIA,(OPTCHSD)
000013F6  6000 FF64                715              BRA .END
000013FA                           716  .PLYOPTION
000013FA  33FC 0000 000035EA       717              MOVE.W #VSPLAYER,(OPTCHSD)
00001402  6000 FF58                718              BRA .END
00001406                           719  .MSCOPTION
00001406  33FC 0002 000035EA       720              MOVE.W #CHSMUSIC,(OPTCHSD)
0000140E  6000 FF4C                721              BRA .END
00001412                           722  
00001412                           723  
00001412                           724  ; -----------------------------------------------------------------------------
00001412                           725  STAINTRP
00001412                           726  ; INTRO STATE PLOT
00001412                           727  ; INPUT    - NONE
00001412                           728  ; OUTPUT   - NONE
00001412                           729  ; MODIFIES - NONE
00001412                           730  ; -----------------------------------------------------------------------------
00001412  48E7 F840                731              MOVEM.L D0-D4/A1,-(A7)
00001416                           732  
00001416                           733              ; First, lets plot the empty attract mode loading bar.
00001416                           734              
00001416  103C 0050                735              MOVE.B #80,D0       ; PCOL.
0000141A  223C 000000FF            736              MOVE.L #BARCOL,D1
00001420  4E4F                     737              TRAP #15
00001422                           738              
00001422  103C 0051                739              MOVE.B #81,D0       ; FCOL ("EMPTY").
00001426  7200                     740              MOVE.L #BAREMPTY,D1
00001428  4E4F                     741              TRAP #15
0000142A                           742              
0000142A  103C 0057                743              MOVE.B #87,D0
0000142E  323C 0140                744              MOVE.W #SCRWIDTH/2,D1
00001432  343C 0190                745              MOVE.W #BARY,D2
00001436  3601                     746              MOVE.W D1,D3
00001438  3802                     747              MOVE.W D2,D4
0000143A  0441 00C8                748              SUB.W #BARWIDTH/2,D1
0000143E  5B42                     749              SUB.W #BARHEIGH/2,D2
00001440  0643 00C8                750              ADD.W #BARWIDTH/2,D3
00001444  5A44                     751              ADD.W #BARHEIGH/2,D4
00001446  4E4F                     752              TRAP #15
00001448                           753  
00001448                           754              ; Now, lets plot the actual loaded progress of the bar.
00001448                           755              ; We keep D1,D2 and D4 from before. Lets temporarily save
00001448                           756              ; D1 in D3 to set color. Also, we want the copy in D3.
00001448  3601                     757              MOVE.W D1,D3
0000144A                           758              
0000144A  103C 0051                759              MOVE.B #81,D0       ; FCOL ("FULL").
0000144E  223C 000000FF            760              MOVE.L #BARCOL,D1
00001454  4E4F                     761              TRAP #15            ; Set.
00001456                           762              
00001456  103C 0057                763              MOVE.B #87,D0       ; Draw rectangle progress bar.
0000145A                           764              
0000145A  3203                     765              MOVE.W D3,D1        ; Recover
0000145C                           766              
0000145C  3639 000035EE            767              MOVE.W (ATRBAR),D3
00001462  D641                     768              ADD.W D1,D3         ; Add progress (ATRBAR).
00001464  4E4F                     769              TRAP #15            ; Draw.
00001466                           770  
00001466                           771  
00001466                           772  .OPTIONS           
00001466                           773   ; FIRST STRING
00001466  4EB9 00002770            774              JSR INTROCOL
0000146C  323C 1E06                775              MOVE.W #((80-20)/2)<<8|6,D1 ; FIRST TEXT COORDINATES
00001470  103C 000B                776              MOVE.B #11,D0
00001474  4E4F                     777              TRAP #15
00001476                           778              
00001476  43F9 00001588            779              LEA.L .STR0,A1  ; STRING POINTER
0000147C  103C 000D                780              MOVE.B #13,D0
00001480  4E4F                     781              TRAP #15
00001482                           782               
00001482                           783                         
00001482                           784   ; GAME OPTION
00001482  0C79 0001 000035EA       785              CMP #VSIA,(OPTCHSD)
0000148A  6600 0008                786              BNE .NOVSIA
0000148E  4EB9 00002468            787              JSR NUMCOL
00001494                           788  .NOVSIA            
00001494  323C 1E0C                789              MOVE.W #((80-20)/2)<<8|12,D1 ; VS IA
00001498  103C 000B                790              MOVE.B #11,D0
0000149C  4E4F                     791              TRAP #15
0000149E                           792              
0000149E  43F9 00001599            793              LEA.L .STR1,A1  ; STRING POINTER
000014A4  103C 000D                794              MOVE.B #13,D0
000014A8  4E4F                     795              TRAP #15
000014AA  4EB9 00002770            796              JSR INTROCOL
000014B0                           797              
000014B0                           798   ; THIRD STRING           
000014B0  0C79 0000 000035EA       799              CMP #VSPLAYER,(OPTCHSD)     ; PVP
000014B8  6600 0008                800              BNE .NOPLAYER
000014BC  4EB9 00002468            801              JSR NUMCOL
000014C2                           802  .NOPLAYER
000014C2                           803              
000014C2  323C 1E0E                804              MOVE.W #((80-20)/2)<<8|14,D1 ; TEXTO
000014C6  103C 000B                805              MOVE.B #11,D0
000014CA  4E4F                     806              TRAP #15
000014CC                           807              
000014CC  43F9 000015A6            808              LEA.L .STR2,A1  ; STRING POINTER
000014D2  103C 000D                809              MOVE.B #13,D0
000014D6  4E4F                     810              TRAP #15
000014D8  4EB9 00002770            811              JSR INTROCOL
000014DE                           812              
000014DE                           813  ;--- OBA OBA
000014DE  0C79 0000 000035EC       814               CMP #DINHO1,(MSCCHSD)
000014E6  6600 0034                815               BNE .ISDINHO2
000014EA                           816              
000014EA  0C79 0002 000035EA       817               CMP #CHSMUSIC,(OPTCHSD)     ; PVP
000014F2  6600 0008                818               BNE .NOMUSIC1
000014F6  4EB9 00002468            819               JSR NUMCOL
000014FC                           820    
000014FC                           821              
000014FC                           822  .NOMUSIC1        
000014FC  323C 1E10                823              MOVE.W #((80-20)/2)<<8|16,D1 ; OBA OBA TEXT COORDINATES
00001500  103C 000B                824              MOVE.B #11,D0
00001504  4E4F                     825              TRAP #15
00001506                           826              
00001506  43F9 000015CD            827              LEA.L .STR4,A1  ; STRING POINTER
0000150C  103C 000D                828              MOVE.B #13,D0
00001510  4E4F                     829              TRAP #15
00001512  4EB9 00002770            830              JSR INTROCOL
00001518  6000 0030                831              BRA .LSTSTRNG
0000151C                           832              
0000151C                           833  ;--- SAMBA     
0000151C                           834  .ISDINHO2    
0000151C  0C79 0002 000035EA       835              CMP #CHSMUSIC,(OPTCHSD)     ; MUSICA
00001524  6600 0008                836              BNE .NOMUSIC2
00001528                           837   
00001528  4EB9 00002468            838              JSR NUMCOL
0000152E                           839  
0000152E                           840  .NOMUSIC2
0000152E  323C 1E10                841              MOVE.W #((80-20)/2)<<8|16,D1 ; SAMBA TEXT COORDINATES
00001532  103C 000B                842              MOVE.B #11,D0
00001536  4E4F                     843              TRAP #15
00001538                           844              
00001538  43F9 000015E0            845              LEA.L .STR5,A1  ; STRING POINTER
0000153E  103C 000D                846              MOVE.B #13,D0
00001542                           847              
00001542  4E4F                     848              TRAP #15
00001544  4EB9 00002770            849              JSR INTROCOL
0000154A                           850  ; FOURTH STRING      
0000154A                           851  .LSTSTRNG     
0000154A                           852              
0000154A  323C 1A14                853              MOVE.W #((80-28)/2)<<8|20,D1 ; FIRST TEXT COORDINATES
0000154E  103C 000B                854              MOVE.B #11,D0
00001552  4E4F                     855              TRAP #15
00001554                           856              
00001554  43F9 000015F3            857              LEA.L .STR6,A1  ; STRING POINTER
0000155A  103C 000D                858              MOVE.B #13,D0
0000155E                           859              
0000155E  4E4F                     860              TRAP #15            
00001560                           861              
00001560                           862              
00001560  0839 0003 0000293B       863              BTST.B #3,(SCRCYCCT)
00001568  6700 0018                864              BEQ .END
0000156C  323C 1D16                865              MOVE.W #((80-22)/2)<<8|22,D1 ; FIRST TEXT COORDINATES
00001570  103C 000B                866              MOVE.B #11,D0
00001574  4E4F                     867              TRAP #15
00001576                           868              
00001576  43F9 000015B7            869              LEA.L .STR3,A1  ; STRING POINTER
0000157C  103C 000D                870              MOVE.B #13,D0
00001580                           871              
00001580  4E4F                     872              TRAP #15            
00001582                           873              
00001582                           874              
00001582                           875  .END            
00001582  4CDF 021F                876              MOVEM.L (A7)+,D0-D4/A1
00001586  4E75                     877              RTS
00001588                           878              
00001588                           879  
00001588                           880              
00001588= 53 55 50 45 52 20 ...    881  .STR0       DC.B     'SUPER TENNIS 68K',0 ; 16 CHARACTERS
00001599= 50 4C 41 59 45 52 ...    882  .STR1       DC.B     'PLAYER VS IA',0 ;12 CHARACTERS
000015A6= 50 4C 41 59 45 52 ...    883  .STR2       DC.B     'PLAYER VS PLAYER',0 ; 16 CHARACTERS
000015B7= 50 52 45 53 53 20 ...    884  .STR3       DC.B     'PRESS SPACE TO PLAY!!',0 ; 22 CHARS
000015CD= 53 4F 4E 47 3A 20 ...    885  .STR4       DC.B     'SONG:  < OBA OBA >',0 // 20 CHARACTERS
000015E0= 53 4F 4E 47 3A 20 ...    886  .STR5       DC.B     'SONG:  <  SAMBA  >',0 // 18 CHARACTERS
000015F3= 50 52 45 53 53 20 ...    887  .STR6       DC.B     'PRESS W TO SEE INSTRUCTIONS',0 ; 27 CHARS ->28
00001610                           888              DS.W 0       
00001610                           889  
00001610                           890  ; -----------------------------------------------------------------------------
00001610                           891  STAINFOI
00001610                           892  ; MENU STATE INIT
00001610                           893  ; INPUT    - NONE
00001610                           894  ; OUTPUT   - NONE
00001610                           895  ; MODIFIES - NONE
00001610                           896  ; -----------------------------------------------------------------------------
00001610  4E75                     897              RTS
00001612                           898  
00001612                           899  ; -----------------------------------------------------------------------------
00001612                           900  STAINFOU
00001612                           901  ; MENU STATE UPDATE
00001612                           902  ; INPUT    - NONE
00001612                           903  ; OUTPUT   - NONE
00001612                           904  ; MODIFIES - NONE
00001612                           905  ; -----------------------------------------------------------------------------
00001612                           906  
00001612  0839 0004 00002939       907              BTST.B  #KBDBITF1,(KBDEDGE)         ; W PRESSED?
0000161A  6700 000A                908              BEQ .NOW
0000161E  33FC 0000 000035E8       909              MOVE.W #STAINTRO,(STANEXT)
00001626                           910  .NOW
00001626  4E75                     911              RTS
00001628                           912  
00001628                           913  ; -----------------------------------------------------------------------------
00001628                           914  STAINFOP
00001628                           915  ; MENU STATE PLOT
00001628                           916  ; INPUT    - NONE
00001628                           917  ; OUTPUT   - NONE
00001628                           918  ; MODIFIES - NONE
00001628                           919  ; -----------------------------------------------------------------------------
00001628  48E7 C040                920              MOVEM.L D0-D1/A1,-(A7)
0000162C  4EB9 00002770            921              JSR INTROCOL
00001632                           922              
00001632  323C 0A06                923              MOVE.W #((80-60)/2)<<8|6,D1 ; FIRST TEXT COORDINATES
00001636  103C 000B                924              MOVE.B #11,D0
0000163A  4E4F                     925              TRAP #15
0000163C                           926              
0000163C  43F9 000016F4            927              LEA.L .STR0,A1  ; STRING POINTER
00001642  103C 000D                928              MOVE.B #13,D0
00001646  4E4F                     929              TRAP #15
00001648                           930  
00001648  323C 0A08                931              MOVE.W #((80-60)/2)<<8|8,D1 ; FIRST TEXT COORDINATES
0000164C  103C 000B                932              MOVE.B #11,D0
00001650  4E4F                     933              TRAP #15
00001652                           934              
00001652  43F9 00001703            935              LEA.L .STR1,A1  ; STRING POINTER
00001658  103C 000D                936              MOVE.B #13,D0
0000165C  4E4F                     937              TRAP #15
0000165E                           938              
0000165E  323C 0A0A                939              MOVE.W #((80-60)/2)<<8|10,D1 ; FIRST TEXT COORDINATES
00001662  103C 000B                940              MOVE.B #11,D0
00001666  4E4F                     941              TRAP #15
00001668                           942              
00001668  43F9 0000171A            943              LEA.L .STR2,A1  ; STRING POINTER
0000166E  103C 000D                944              MOVE.B #13,D0
00001672  4E4F                     945              TRAP #15
00001674                           946  
00001674  323C 0A0E                947              MOVE.W #((80-60)/2)<<8|14,D1 ; FIRST TEXT COORDINATES
00001678  103C 000B                948              MOVE.B #11,D0
0000167C  4E4F                     949              TRAP #15
0000167E                           950              
0000167E  43F9 00001733            951              LEA.L .STR3,A1  ; STRING POINTER
00001684  103C 000D                952              MOVE.B #13,D0
00001688  4E4F                     953              TRAP #15
0000168A                           954              
0000168A  323C 0A10                955              MOVE.W #((80-60)/2)<<8|16,D1 ; FIRST TEXT COORDINATES
0000168E  103C 000B                956              MOVE.B #11,D0
00001692  4E4F                     957              TRAP #15
00001694                           958              
00001694  43F9 00001743            959              LEA.L .STR4,A1  ; STRING POINTER
0000169A  103C 000D                960              MOVE.B #13,D0
0000169E  4E4F                     961              TRAP #15
000016A0                           962  
000016A0  323C 0A12                963              MOVE.W #((80-60)/2)<<8|18,D1 ; FIRST TEXT COORDINATES
000016A4  103C 000B                964              MOVE.B #11,D0
000016A8  4E4F                     965              TRAP #15
000016AA                           966              
000016AA  43F9 00001779            967              LEA.L .STR5,A1  ; STRING POINTER
000016B0  103C 000D                968              MOVE.B #13,D0
000016B4  4E4F                     969              TRAP #15    
000016B6                           970  
000016B6  323C 0A14                971              MOVE.W #((80-60)/2)<<8|20,D1 ; FIRST TEXT COORDINATES
000016BA  103C 000B                972              MOVE.B #11,D0
000016BE  4E4F                     973              TRAP #15
000016C0                           974              
000016C0  43F9 000017A2            975              LEA.L .STR6,A1  ; STRING POINTER
000016C6  103C 000D                976              MOVE.B #13,D0
000016CA  4E4F                     977              TRAP #15  
000016CC                           978       
000016CC  0839 0003 0000293B       979              BTST.B #3,(SCRCYCCT)
000016D4  6700 0018                980              BEQ .END
000016D8  323C 0A18                981              MOVE.W #((80-60)/2)<<8|24,D1 ; FIRST TEXT COORDINATES
000016DC  103C 000B                982              MOVE.B #11,D0
000016E0  4E4F                     983              TRAP #15
000016E2                           984              
000016E2  43F9 000017C3            985              LEA.L .STR7,A1  ; STRING POINTER
000016E8  103C 000D                986              MOVE.B #13,D0
000016EC  4E4F                     987              TRAP #15   
000016EE                           988  .END            
000016EE  4CDF 0203                989              MOVEM.L (A7)+,D0-D1/A1
000016F2  4E75                     990              RTS
000016F4                           991              
000016F4= 47 41 4D 45 20 43 ...    992  .STR0       DC.B     'GAME CONTROLS:',0 
00001703= 57 41 53 44 20 54 ...    993  .STR1       DC.B     'WASD TO MOVE PLAYER 1.',0 
0000171A= 41 52 52 4F 57 53 ...    994  .STR2       DC.B     'ARROWS TO MOVE PLAYER 2.',0 
00001733= 41 42 4F 55 54 20 ...    995  .STR3       DC.B     'ABOUT THE GAME:',0 
00001743= 44 4F 20 4E 4F 54 ...    996  .STR4       DC.B     'DO NOT LET THE BALL TOUCH YOUR ZONE 3 TIMES IN A ROW.',0 
00001779= 49 46 20 54 48 41 ...    997  .STR5       DC.B     'IF THAT HAPPENS, THE RIVAL GETS 1 POINT.',0
000017A2= 54 48 45 20 46 49 ...    998  .STR6       DC.B     'THE FIRST TO SCORE 7 POINTS WIN.',0 
000017C3= 50 55 53 48 20 57 ...    999  .STR7       DC.B     'PUSH W TO RETURN TO MENU',0 
000017DC                          1000              DS.W 0
000017DC                          1001              
000017DC                          1002  
000017DC                          1003  ; -----------------------------------------------------------------------------
000017DC                          1004  STAPLAYI
000017DC                          1005  ; PLAY STATE INIT
000017DC                          1006  ; INPUT    - NONE
000017DC                          1007  ; OUTPUT   - NONE
000017DC                          1008  ; MODIFIES - NONE
000017DC                          1009  ; -----------------------------------------------------------------------------
000017DC  4EB9 00002782           1010              JSR LOADMUSI
000017E2  4EB9 000027F6           1011              JSR PLAYMUSI
000017E8  4EB9 00001B52           1012              JSR MAPINIT
000017EE  4EB9 00001B88           1013              JSR MAPPLOT
000017F4                          1014              
000017F4  4EB9 00001D74           1015              JSR PLR1INIT
000017FA  4EB9 00001ED0           1016              JSR PLR2INIT
00001800                          1017              
00001800  4EF9 0000202C           1018              JMP BALLINIT
00001806                          1019  
00001806                          1020  ; -----------------------------------------------------------------------------
00001806                          1021  STAPLAYU
00001806                          1022  ; PLAY STATE UPDATE
00001806                          1023  ; INPUT    - NONE
00001806                          1024  ; OUTPUT   - NONE
00001806                          1025  ; MODIFIES - NONE
00001806                          1026  ; -----------------------------------------------------------------------------
00001806  0C79 0003 000035EA      1027              CMP.W #ATRMODE,(OPTCHSD)    ; Check keys to return in attract mode.
0000180E  6600 0008               1028              BNE .SKIP
00001812  4EB9 00001AF0           1029              JSR STAATRU
00001818                          1030  .SKIP
00001818  4EB9 00001B60           1031              JSR MAPUPD
0000181E                          1032  
0000181E  4EB9 00001D8C           1033              JSR PLR1UPD
00001824  4EB9 00001EE8           1034              JSR PLR2UPD
0000182A                          1035              
0000182A  4EB9 00002064           1036              JSR BALLUPD    
00001830                          1037              
00001830  0C79 0007 000035CA      1038              CMP #MAXSCORE,(SCORE1)
00001838  6700 0010               1039              BEQ .GAMEOVER
0000183C  0C79 0007 000035D6      1040              CMP #MAXSCORE,(SCORE2)
00001844  6700 0004               1041              BEQ .GAMEOVER
00001848  4E75                    1042              RTS
0000184A                          1043  .GAMEOVER
0000184A  33FC 0003 000035E8      1044              MOVE.W #STAGOVER,(STANEXT)
00001852                          1045              
00001852                          1046  ; -----------------------------------------------------------------------------
00001852                          1047  STAPLAYP
00001852                          1048  ; PLAY STATE PLOT
00001852                          1049  ; INPUT    - NONE
00001852                          1050  ; OUTPUT   - NONE
00001852                          1051  ; MODIFIES - NONE
00001852                          1052  ; -----------------------------------------------------------------------------
00001852  4EB9 00001B88           1053              JSR MAPPLOT
00001858                          1054              
00001858  4EB9 00001E8C           1055              JSR PLR1PLOT
0000185E  4EB9 00001FE8           1056              JSR PLR2PLOT
00001864                          1057              
00001864  4EB9 000023A8           1058              JSR BALLPLOT
0000186A                          1059              
0000186A  0C79 0003 000035EA      1060              CMP.W #ATRMODE,(OPTCHSD)    ; Display text during attract mode.
00001872  6600 0008               1061              BNE .RTS
00001876  4EF9 00001B06           1062              JMP STAATRP     
0000187C                          1063  .RTS
0000187C  4E75                    1064              RTS
0000187E                          1065              
0000187E                          1066  
0000187E                          1067  ; -----------------------------------------------------------------------------
0000187E                          1068  STAGOLI
0000187E                          1069  ; AFTER GOAL STATE INIT
0000187E                          1070  ; INPUT    - NONE
0000187E                          1071  ; OUTPUT   - NONE
0000187E                          1072  ; MODIFIES - NONE
0000187E                          1073  ; -----------------------------------------------------------------------------
0000187E                          1074              ;MOVE.W #STAGOVER,(STANEXT)
0000187E  4EB9 00001B52           1075              JSR MAPINIT
00001884  4EB9 0000202C           1076              JSR BALLINIT
0000188A  4EB9 00001D74           1077              JSR PLR1INIT
00001890  4EB9 00001ED0           1078              JSR PLR2INIT
00001896                          1079              
00001896  4239 0000293B           1080              CLR.B (SCRCYCCT)
0000189C                          1081              
0000189C  4EB9 00002810           1082              JSR COUNTINIT
000018A2  0C79 0002 000035EC      1083              CMP #2,(MSCCHSD)
000018AA  6700 001A               1084              BEQ .END
000018AE  0C79 0006 000035CA      1085              CMP #6,(SCORE1)
000018B6  6700 0010               1086              BEQ .COLMUSIC
000018BA  0C79 0006 000035D6      1087              CMP #6,(SCORE2)
000018C2  6700 0004               1088              BEQ .COLMUSIC
000018C6                          1089  .END
000018C6  4E75                    1090              RTS
000018C8                          1091  .COLMUSIC
000018C8  33FC 0002 000035EC      1092              MOVE.W #2,(MSCCHSD)
000018D0  4EB9 00002806           1093              JSR STPSOUND
000018D6  4EB9 00002782           1094              JSR LOADMUSI
000018DC  4EF9 000027F6           1095              JMP PLAYMUSI
000018E2                          1096  
000018E2                          1097  ; -----------------------------------------------------------------------------
000018E2                          1098  STAGOLU
000018E2                          1099  ; AFTER GOAL STATE UPDATE
000018E2                          1100  ; INPUT    - NONE
000018E2                          1101  ; OUTPUT   - NONE
000018E2                          1102  ; MODIFIES - NONE
000018E2                          1103  ; -----------------------------------------------------------------------------
000018E2  0C79 0003 000035EA      1104              CMP.W #ATRMODE,(OPTCHSD)    ; Check keys to return in attract mode.
000018EA  6600 0008               1105              BNE .SKIP
000018EE  4EB9 00001AF0           1106              JSR STAATRU
000018F4                          1107  .SKIP            
000018F4  4EB9 00002822           1108              JSR COUNTUPD  ; STATE CHANGES INSIDE COUNTUPD
000018FA                          1109  
000018FA                          1110  .RTS                      
000018FA  4E75                    1111              RTS
000018FC                          1112  
000018FC                          1113  ; -----------------------------------------------------------------------------
000018FC                          1114  STAGOLP
000018FC                          1115  ; AFTER GOAL STATE PLOT
000018FC                          1116  ; INPUT    - NONE
000018FC                          1117  ; OUTPUT   - NONE
000018FC                          1118  ; MODIFIES - NONE
000018FC                          1119  ; -----------------------------------------------------------------------------
000018FC                          1120              
000018FC  4EB9 00001B88           1121              JSR MAPPLOT
00001902  4EB9 000023A8           1122              JSR BALLPLOT
00001908  4EB9 00001E8C           1123              JSR PLR1PLOT
0000190E  4EB9 00001FE8           1124              JSR PLR2PLOT
00001914                          1125              
00001914  4EB9 00002468           1126              JSR NUMCOL
0000191A  4EB9 0000283C           1127              JSR COUNTPLOT
00001920                          1128              
00001920  0C79 0003 000035EA      1129              CMP.W #ATRMODE,(OPTCHSD)    ; Display text during attract mode.
00001928  6600 0008               1130              BNE .RTS
0000192C  4EF9 00001B06           1131              JMP STAATRP     
00001932                          1132  .RTS
00001932  4E75                    1133              RTS
00001934                          1134  
00001934                          1135  
00001934                          1136  
00001934                          1137  ; -----------------------------------------------------------------------------
00001934                          1138  STAGOVRI
00001934                          1139  ; GAME OVER STATE INIT
00001934                          1140  ; INPUT    - NONE
00001934                          1141  ; OUTPUT   - NONE
00001934                          1142  ; MODIFIES - NONE
00001934                          1143  ; -----------------------------------------------------------------------------
00001934  4E75                    1144              RTS
00001936                          1145  
00001936                          1146  ; -----------------------------------------------------------------------------
00001936                          1147  STAGOVRU
00001936                          1148  ; GAME OVER STATE UPDATE
00001936                          1149  ; INPUT    - NONE
00001936                          1150  ; OUTPUT   - NONE
00001936                          1151  ; MODIFIES - NONE
00001936                          1152  ; -----------------------------------------------------------------------------
00001936  0839 0007 00002939      1153              BTST.B #KBDBITPS,(KBDEDGE)
0000193E  6700 001C               1154              BEQ    .RTS
00001942  33FC 0000 000035E8      1155              MOVE.W #STAINTRO,(STANEXT)
0000194A                          1156              
0000194A  0C79 0003 000035EA      1157              CMP.W #ATRMODE,(OPTCHSD)    ; Check keys to return in attract mode.
00001952  6600 0008               1158              BNE .RTS
00001956  4EB9 00001AF0           1159              JSR STAATRU
0000195C                          1160  .RTS
0000195C  4E75                    1161              RTS
0000195E                          1162              
0000195E                          1163  
0000195E                          1164  ; -----------------------------------------------------------------------------
0000195E                          1165  STAGOVRP
0000195E                          1166  ; GAME OVER STATE PLOT
0000195E                          1167  ; INPUT    - NONE
0000195E                          1168  ; OUTPUT   - NONE
0000195E                          1169  ; MODIFIES - NONE
0000195E                          1170  ; -----------------------------------------------------------------------------
0000195E  48E7 C040               1171              MOVEM.L D0-D1/A1,-(A7)
00001962                          1172              
00001962  4EB9 00001B88           1173              JSR MAPPLOT
00001968  4EB9 00001E8C           1174              JSR PLR1PLOT
0000196E  4EB9 00001FE8           1175              JSR PLR2PLOT
00001974  4EB9 000023A8           1176              JSR BALLPLOT
0000197A  4EB9 00002468           1177              JSR NUMCOL
00001980                          1178              
00001980                          1179              ; Depending on the gamemode and results, we will
00001980                          1180              ; display diferent text. We also have to check
00001980                          1181              ; attract mode game over.
00001980                          1182              ; 0=vsIA, 1=vsPLAYER, 3=Attract mode
00001980                          1183              
00001980                          1184              ; We will ALWAYS display "GAME OVER!".
00001980  323C 220C               1185              MOVE.W #((80-12)/2)<<8|12,D1        ; COORDINATES
00001984  103C 000B               1186              MOVE.B #11,D0
00001988  4E4F                    1187              TRAP #15
0000198A                          1188              
0000198A  43F9 00001A60           1189              LEA.L .STR0,A1                      ; STRING POINTER
00001990  103C 000D               1190              MOVE.B #13,D0
00001994  4E4F                    1191              TRAP #15
00001996                          1192  
00001996                          1193              ; If attract mode, we will just ask to press any key.
00001996  0C79 0003 000035EA      1194              CMP.W #ATRMODE,(OPTCHSD)
0000199E  6600 000C               1195              BNE .SKIP
000019A2  4EB9 00001B06           1196              JSR STAATRP  
000019A8  6000 0050               1197              BRA .RTS
000019AC                          1198  .SKIP            
000019AC                          1199              ; In pvp and pvb (player vs player and players vs bot).
000019AC                          1200              ; We will say 'PRESS SPACE TO RESTART!!'.
000019AC  0839 0003 0000293B      1201              BTST.B #3,(SCRCYCCT)
000019B4  6700 0018               1202              BEQ .SKIP2
000019B8                          1203              
000019B8  323C 1B14               1204              MOVE.W #((80-26)/2)<<8|20,D1 ; FIRST TEXT COORDINATES
000019BC  103C 000B               1205              MOVE.B #11,D0
000019C0  4E4F                    1206              TRAP #15
000019C2                          1207              
000019C2  43F9 00001A6D           1208              LEA.L .STR1,A1  ; STRING POINTER
000019C8  103C 000D               1209              MOVE.B #13,D0
000019CC  4E4F                    1210              TRAP #15
000019CE                          1211  .SKIP2       
000019CE                          1212              ; Lets check if the mode is VSIA or VSPLAYER.
000019CE  0C79 0001 000035EA      1213              CMP.W #VSIA,(OPTCHSD)
000019D6  6700 0012               1214              BEQ .VSIA
000019DA                          1215  .VSPLAYER            
000019DA  0C79 0007 000035CA      1216              CMP.W #MAXSCORE,(SCORE1)    ; Check winner.
000019E2  6700 004C               1217              BEQ .PVPPLR1
000019E6  6000 0060               1218              BRA .PVPPLR2
000019EA                          1219              
000019EA                          1220  .VSIA
000019EA  0C79 0007 000035CA      1221              CMP.W #MAXSCORE,(SCORE1)    ; Check winner.
000019F2  6700 000C               1222              BEQ .PVBPLR
000019F6  6000 0020               1223              BRA .PVBIA
000019FA                          1224  .RTS     
000019FA  4CDF 0203               1225              MOVEM.L (A7)+,D0-D1/A1
000019FE  4E75                    1226              RTS
00001A00                          1227  ; -- 4 POSSIBILITIES --
00001A00                          1228  .PVBPLR
00001A00                          1229              ; PLAYER WON
00001A00  323C 1712               1230              MOVE.W #((80-34)/2)<<8|18,D1
00001A04  103C 000B               1231              MOVE.B #11,D0
00001A08  4E4F                    1232              TRAP #15
00001A0A                          1233              
00001A0A  43F9 00001A88           1234              LEA.L .STR2,A1
00001A10  103C 000D               1235              MOVE.B #13,D0
00001A14  4E4F                    1236              TRAP #15
00001A16  60E2                    1237              BRA .RTS
00001A18                          1238  .PVBIA
00001A18                          1239              ; IA WON
00001A18  323C 1B12               1240              MOVE.W #((80-26)/2)<<8|18,D1
00001A1C  103C 000B               1241              MOVE.B #11,D0
00001A20  4E4F                    1242              TRAP #15
00001A22                          1243              
00001A22  43F9 00001AAB           1244              LEA.L .STR3,A1
00001A28  103C 000D               1245              MOVE.B #13,D0
00001A2C  4E4F                    1246              TRAP #15
00001A2E  60CA                    1247              BRA .RTS
00001A30                          1248  .PVPPLR1
00001A30                          1249              ; PLAYER 1 WON
00001A30  323C 1E12               1250              MOVE.W #((80-20)/2)<<8|18,D1
00001A34  103C 000B               1251              MOVE.B #11,D0
00001A38  4E4F                    1252              TRAP #15
00001A3A                          1253              
00001A3A  43F9 00001AC6           1254              LEA.L .STR4,A1
00001A40  103C 000D               1255              MOVE.B #13,D0
00001A44  4E4F                    1256              TRAP #15
00001A46  60B2                    1257              BRA .RTS
00001A48                          1258  .PVPPLR2
00001A48                          1259              ; PLAYER 2 WON
00001A48  323C 1E12               1260              MOVE.W #((80-20)/2)<<8|18,D1
00001A4C  103C 000B               1261              MOVE.B #11,D0
00001A50  4E4F                    1262              TRAP #15
00001A52                          1263              
00001A52  43F9 00001ADB           1264              LEA.L .STR5,A1
00001A58  103C 000D               1265              MOVE.B #13,D0
00001A5C  4E4F                    1266              TRAP #15
00001A5E  609A                    1267              BRA .RTS
00001A60                          1268  
00001A60                          1269              
00001A60= 20 47 41 4D 45 20 ...   1270  .STR0       DC.B     ' GAME OVER! ',0                       ; ALL MODES
00001A6D= 20 50 52 45 53 53 ...   1271  .STR1       DC.B     ' PRESS SPACE TO RESTART!! ',0         ; PVP & PVB
00001A88= 20 57 45 4C 4C 20 ...   1272  .STR2       DC.B     ' WELL DONE, YOU ARE RONALDINHO!!! ',0 ; PVB (PLAYER WIN)
00001AAB= 20 42 45 54 54 45 ...   1273  .STR3       DC.B     ' BETTER LUCK NEXT TIME XD ',0         ; PVB (IA WIN)
00001AC6= 20 50 4C 41 59 45 ...   1274  .STR4       DC.B     ' PLAYER 1 VICTORY!! ',0               ; PVP (PLAYER1 WIN)
00001ADB= 20 50 4C 41 59 45 ...   1275  .STR5       DC.B     ' PLAYER 2 VICTORY!! ',0               ; PVP (PLAYER2 WIN)
00001AF0                          1276              DS.W 0
00001AF0                          1277  
00001AF0                          1278  ; -----------------------------------------------------------------------------
00001AF0                          1279  STAATRU
00001AF0                          1280  ; ATTRACT MODE UPDATE
00001AF0                          1281  ; INPUT    - NONE
00001AF0                          1282  ; OUTPUT   - NONE
00001AF0                          1283  ; MODIFIES - NONE
00001AF0                          1284  ; -----------------------------------------------------------------------------
00001AF0  4247                    1285              CLR.W D7
00001AF2  1E39 00002938           1286              MOVE.B (KBDVAL),D7          ; Update flags by moving a byte.
00001AF8  6700 000A               1287              BEQ .RTS
00001AFC  33FC 0000 000035E8      1288              MOVE.W #STAINTRO,(STANEXT)
00001B04                          1289  .RTS
00001B04  4E75                    1290              RTS
00001B06                          1291              
00001B06                          1292  ; -----------------------------------------------------------------------------
00001B06                          1293  STAATRP
00001B06                          1294  ; ATTRACT MODE PLOT
00001B06                          1295  ; INPUT    - NONE
00001B06                          1296  ; OUTPUT   - NONE
00001B06                          1297  ; MODIFIES - NONE
00001B06                          1298  ; -----------------------------------------------------------------------------
00001B06  0839 0003 0000293B      1299              BTST.B #3,(SCRCYCCT)
00001B0E  6700 0026               1300              BEQ .END
00001B12                          1301              
00001B12  48E7 C040               1302              MOVEM.L D0-D1/A1,-(A7)      ; We only save if we go in.
00001B16                          1303              
00001B16  4EB9 00002468           1304              JSR NUMCOL
00001B1C                          1305              
00001B1C  323C 1C14               1306              MOVE.W #((80-24)/2)<<8|20,D1 ; FIRST TEXT COORDINATES
00001B20  103C 000B               1307              MOVE.B #11,D0
00001B24  4E4F                    1308              TRAP #15
00001B26                          1309              
00001B26  43F9 00001B38           1310              LEA.L .STR0,A1  ; STRING POINTER
00001B2C  103C 000D               1311              MOVE.B #13,D0
00001B30  4E4F                    1312              TRAP #15
00001B32                          1313              
00001B32  4CDF 0203               1314              MOVEM.L (A7)+,D0-D1/A1      ; Recover.
00001B36                          1315  .END            
00001B36  4E75                    1316              RTS
00001B38                          1317  
00001B38= 20 50 52 45 53 53 ...   1318  .STR0       DC.B    ' PRESS ANY KEY TO START ',0   ;24 CHARS
00001B52                          1319              DS.W    0
00001B52                          1320              
00001B52                          1321  
00001B52                          1322  
00001B52                          1323  
00001B52                          1324  
00001B52                          1325  
00001B52                          1326  
00001B52                          1327  
00001B52                          1328  
00001B52                          1329  
00001B52                          1330  
00001B52                          1331  
00001B52                          1332  
00001B52                          1333  
00001B52                          1334  
00001B52                          1335  
00001B52                          1336  
00001B52                          1337  
00001B52                          1338  
00001B52                          1339  
00001B52                          1340  
00001B52                          1341  
00001B52                          1342  
00001B52                          1343  
00001B52                          1344  
00001B52                          1345  
00001B52                          1346  
00001B52                          1347  
00001B52                          1348  -------------------- end include --------------------
00001B52                          1349              INCLUDE "MAP.X68"               ; MAPA DE LA PISTA
00001B52                          1350  
00001B52                          1351  ; -----------------------------------------------------------------------------
00001B52                          1352  MAPINIT
00001B52                          1353  ; INITS THE MAP
00001B52                          1354  ; INPUT    - NONE
00001B52                          1355  ; OUTPUT   - NONE
00001B52                          1356  ; MODIFIES - NONE
00001B52                          1357  ; -----------------------------------------------------------------------------
00001B52  4279 000035E0           1358              CLR.W   (WARNING1)
00001B58  4279 000035E2           1359              CLR.W   (WARNING2)
00001B5E                          1360              
00001B5E  4E75                    1361              RTS
00001B60                          1362  
00001B60                          1363  ; -----------------------------------------------------------------------------
00001B60                          1364  MAPUPD
00001B60                          1365  ; UPDATES THE MAP
00001B60                          1366  ; INPUT    - NONE
00001B60                          1367  ; OUTPUT   - NONE
00001B60                          1368  ; MODIFIES - NONE
00001B60                          1369  ; -----------------------------------------------------------------------------
00001B60  0C79 0146 000035D8      1370              CMP.W   #(SCRWIDTH+SEPAWIDT)/2,(BALLX)
00001B68  6D00 000A               1371              BLT     .NEXT1
00001B6C  4279 000035E0           1372              CLR.W   (WARNING1)
00001B72  4E75                    1373              RTS
00001B74                          1374  .NEXT1
00001B74  0C79 013A 000035D8      1375              CMP.W   #(SCRWIDTH-SEPAWIDT)/2,(BALLX)
00001B7C  6E00 0008               1376              BGT     .END
00001B80  4279 000035E2           1377              CLR.W   (WARNING2)
00001B86                          1378  .END
00001B86  4E75                    1379              RTS
00001B88                          1380  
00001B88                          1381  ; -----------------------------------------------------------------------------
00001B88                          1382  MAPPLOT
00001B88                          1383  ; PLOTS THE MAP
00001B88                          1384  ; INPUT    - NONE
00001B88                          1385  ; OUTPUT   - NONE
00001B88                          1386  ; MODIFIES - NONE
00001B88                          1387  ; -----------------------------------------------------------------------------
00001B88                          1388  
00001B88  48E7 F800               1389             MOVEM.L D0-D4,-(A7)      ; Guardamos todos los registros en la pila.
00001B8C                          1390  
00001B8C                          1391  ;----------------------     FONDO DE COLOR AZUL CIELO       -------------------
00001B8C                          1392  
00001B8C  103C 0050               1393             MOVE.B #80,D0            ; Task para el color del contorno.
00001B90  223C 00EBCE87           1394             MOVE.L #BACKGCOL,D1      ; Color cian.
00001B96  4E4F                    1395             TRAP #15                 ; Set.
00001B98                          1396             
00001B98  103C 0051               1397             MOVE.B #81,D0            ; Task para el color de relleno.
00001B9C                          1398             ;MOVE.L #BACKGCOL,D1     ; Mismo color, ya lo tenemos en D1.
00001B9C  4E4F                    1399             TRAP #15                 ; Set.
00001B9E                          1400             
00001B9E                          1401             
00001B9E  103C 0057               1402             MOVE.B #87,D0            ; Task para dibujar un rectangulo(fondo).
00001BA2                          1403                                      ; Dejaremos un borde negro por defecto.
00001BA2  323C 0002               1404             MOVE.W #BOUNDMAR,D1                  ; Origen X.
00001BA6  343C 0002               1405             MOVE.W #BOUNDMAR,D2                  ; Origen Y.
00001BAA  363C 027D               1406             MOVE.W #SCRWIDTH-BOUNDMAR-1,D3       ; Final X.
00001BAE  383C 01DD               1407             MOVE.W #SCRHEIGH-BOUNDMAR-1,D4       ; Final Y.
00001BB2  4E4F                    1408             TRAP #15                             ; Set.
00001BB4                          1409             
00001BB4                          1410  ;--------------------       CSPED DE LA PISTA          -----------------------
00001BB4                          1411              
00001BB4  103C 0050               1412             MOVE.B #80,D0            ; Task para el color del contorno.
00001BB8  223C 00497700           1413             MOVE.L #GRASPCOL,D1      ; Color verde oscuro.
00001BBE  4E4F                    1414             TRAP #15                 ; Set.
00001BC0                          1415             
00001BC0  103C 0051               1416             MOVE.B #81,D0            ; Task para el color de relleno.
00001BC4  223C 004CB122           1417             MOVE.L #GRASFCOL,D1      ; Color verde claro.
00001BCA  4E4F                    1418             TRAP #15                 ; Set.
00001BCC                          1419             
00001BCC  103C 0057               1420             MOVE.B #87,D0            ; Task para dibujar un rectangulo(hierba).
00001BD0  323C 0002               1421             MOVE.W #BOUNDMAR,D1                  ; Origen X.
00001BD4  343C 01C2               1422             MOVE.W #SCRHEIGH-GRASHEIG,D2         ; Origen Y.
00001BD8                          1423             ;MOVE.W #SCRWIDTH-BOUNDMAR-1,D3      ; D3 y D4 igual que antes.
00001BD8                          1424             ;MOVE.W #SCRHEIGH-BOUNDMAR-1,D4
00001BD8  4E4F                    1425             TRAP #15                             ; Set.
00001BDA                          1426  
00001BDA                          1427  ;--------------------       DETALLES DE LA PISTA (LINEAS)         -------------
00001BDA                          1428  
00001BDA  103C 0050               1429             MOVE.B #80,D0            ; Task para el color del contorno.
00001BDE  223C 00FFFFFF           1430             MOVE.L #LINECOL,D1       ; Color blanco.
00001BE4  4E4F                    1431             TRAP #15                 ; Set
00001BE6                          1432             
00001BE6  103C 0051               1433             MOVE.B #81,D0            ; Color de relleno
00001BEA                          1434             ;MOVE.L #LINECOL,D1      ; Color blanco, lo tenemos de antes.
00001BEA  4E4F                    1435             TRAP #15                 ; Set.
00001BEC                          1436             
00001BEC  103C 0057               1437             MOVE.B #87,D0            ; Task para dibujar un rectangulo(linea 1).
00001BF0  323C 0002               1438             MOVE.W #BOUNDMAR,D1                      ; Origen X.
00001BF4                          1439             ;MOVE.W SCRHEIGH-GRASHEIG,D2             ; Origen Y, de antes.
00001BF4                          1440             ;MOVE.W #SCRWIDTH-BOUNDMAR-1,D3          ; Final X, de antes.
00001BF4  383C 01CA               1441             MOVE.W #SCRHEIGH-GRASHEIG+LINEWIDT,D4    ; Origen Y + LINEWIDT.
00001BF8  4E4F                    1442             TRAP #15                                 ; Set.
00001BFA                          1443             
00001BFA  103C 0057               1444             MOVE.B #87,D0            ; Task rectangulo, para la linea central.
00001BFE  323C 013B               1445             MOVE.W #SCRWIDTH/2-LINEWIDT/2-1,D1      
00001C02                          1446             ;MOVE.W #SCRHEIGH-GRASHEIG,D2            ; Origen Y, de antes.
00001C02  363C 0145               1447             MOVE.W #SCRWIDTH/2+LINEWIDT/2+1,D3
00001C06  383C 01DD               1448             MOVE.W #SCRHEIGH-BOUNDMAR-1,D4
00001C0A  4E4F                    1449             TRAP #15
00001C0C                          1450             
00001C0C                          1451  ; ---------------------- SCOREBOARD -------------------------------------------
00001C0C                          1452  ; Lets draw the two boards that show the players score.
00001C0C                          1453  
00001C0C                          1454      ; -- DRAW OUTER LEFT RECTANGLE
00001C0C  103C 0050               1455             MOVE.B #80,D0            ; Pen color task.
00001C10  7200                    1456             MOVE.L #SCBOPCOL,D1      ; Color.
00001C12  4E4F                    1457             TRAP #15
00001C14                          1458             
00001C14  103C 0051               1459             MOVE.B #81,D0            ; Fill color task.
00001C18  223C 0000FF00           1460             MOVE.L #SCBOCOL1,D1      ; Color
00001C1E  4E4F                    1461             TRAP #15
00001C20                          1462              
00001C20  103C 0057               1463             MOVE.B #87,D0            ; Lets draw the outer rectangle.
00001C24  323C 00A0               1464             MOVE.W #SCRWIDTH/4,D1
00001C28  343C 0078               1465             MOVE.W #SCRHEIGH/4,D2
00001C2C  3601                    1466             MOVE.W D1,D3
00001C2E  3802                    1467             MOVE.W D2,D4
00001C30  0441 0046               1468             SUB.W #SCBOWIDT/2,D1
00001C34  0442 002D               1469             SUB.W #SCBOHEIG/2,D2
00001C38  0643 0046               1470             ADD.W #SCBOWIDT/2,D3
00001C3C  0644 002D               1471             ADD.W #SCBOHEIG/2,D4
00001C40  4E4F                    1472             TRAP #15
00001C42                          1473             
00001C42                          1474      ; -- DRAW OUTER RIGHT RECTANGLE (FEW MODIFICATIONS)
00001C42                          1475      
00001C42  103C 0051               1476             MOVE.B #81,D0            ; Change color for the right team
00001C46  223C 00BBBB00           1477             MOVE.L #SCBOCOL2,D1
00001C4C  4E4F                    1478             TRAP #15
00001C4E                          1479      
00001C4E  103C 0057               1480             MOVE.B #87,D0            ; Getting the D1 value again
00001C52  323C 005A               1481             MOVE.W #SCRWIDTH/4-SCBOWIDT/2,D1
00001C56                          1482             
00001C56  0641 0140               1483             ADD.W #SCRWIDTH/2,D1    ; If we add SCRWIDTH/2, we will get the same
00001C5A  0643 0140               1484             ADD.W #SCRWIDTH/2,D3    ; rectangle on the opposite half(intended).
00001C5E  4E4F                    1485             TRAP #15
00001C60                          1486  
00001C60                          1487      ; -- DRAW INNER LEFT RECTANGLE
00001C60                          1488             
00001C60  103C 0050               1489             MOVE.B #80,D0            ; Pen color task.
00001C64  7200                    1490             MOVE.L #SCBOPCOL,D1      ; Color.
00001C66  4E4F                    1491             TRAP #15
00001C68                          1492             
00001C68  103C 0051               1493             MOVE.B #81,D0            ; Fill color task.
00001C6C  223C 00AAAAAA           1494             MOVE.L #SCBOFCOL,D1      ; Color.
00001C72  4E4F                    1495             TRAP #15
00001C74                          1496             
00001C74  103C 0057               1497             MOVE.B #87,D0            ; Lets draw the inner rectangle.
00001C78  323C 00A0               1498             MOVE.W #SCRWIDTH/4,D1
00001C7C  343C 0078               1499             MOVE.W #SCRHEIGH/4,D2
00001C80  3601                    1500             MOVE.W D1,D3
00001C82  3802                    1501             MOVE.W D2,D4
00001C84  0441 0041               1502             SUB.W #SCBOWIDT/2-SCBOMARG,D1
00001C88  0442 0028               1503             SUB.W #SCBOHEIG/2-SCBOMARG,D2
00001C8C  0643 0041               1504             ADD.W #SCBOWIDT/2-SCBOMARG,D3
00001C90  0644 0028               1505             ADD.W #SCBOHEIG/2-SCBOMARG,D4
00001C94  4E4F                    1506             TRAP #15
00001C96                          1507             
00001C96  0641 0140               1508             ADD.W #SCRWIDTH/2,D1     ; Draw inner rectangle on opposite half.
00001C9A  0643 0140               1509             ADD.W #SCRWIDTH/2,D3
00001C9E  4E4F                    1510             TRAP #15
00001CA0                          1511  
00001CA0                          1512      ; -- NOW DRAW SCORES
00001CA0                          1513  
00001CA0  4EB9 000023EC           1514             JSR  DRAWSC1
00001CA6  4EB9 0000241A           1515             JSR  DRAWSC2
00001CAC                          1516             
00001CAC                          1517      ; -- BALL TOUCHED GROUND WARNINGS(COLORING THE LINES DIFFERENTLY)
00001CAC                          1518              
00001CAC  0C79 0000 000035E0      1519             CMP.W #0,(WARNING1)      ; If no warnings1, dont color ground.
00001CB4  6700 0014               1520             BEQ .NOWARN1
00001CB8                          1521             
00001CB8  4EB9 00001D3E           1522             JSR .WARNCOL
00001CBE  323C 0002               1523             MOVE.W #BOUNDMAR,D1      ; X1 OF LEFT FIELD
00001CC2  363C 0140               1524             MOVE.W #SCRWIDTH/2,D3    ; X2 OF LEFT FIELD
00001CC6                          1525             
00001CC6  6000 001C               1526             BRA .DRAWWARN
00001CCA                          1527  .NOWARN1
00001CCA  0C79 0000 000035E2      1528             CMP.W #0,(WARNING2)      ; If no warnings2, dont color ground.
00001CD2  6700 002A               1529             BEQ .RED
00001CD6                          1530             
00001CD6  4EB9 00001D3E           1531             JSR .WARNCOL
00001CDC  323C 0140               1532             MOVE.W #SCRWIDTH/2,D1
00001CE0  363C 027E               1533             MOVE.W #SCRWIDTH-BOUNDMAR,D3
00001CE4                          1534  
00001CE4                          1535  .DRAWWARN
00001CE4  0839 0003 0000293B      1536             BTST.B #3,(SCRCYCCT)
00001CEC  6700 0010               1537             BEQ .RED
00001CF0                          1538  
00001CF0  103C 0057               1539             MOVE.B #87,D0            ; DRAW RECTANGLE TASK.
00001CF4  343C 01C2               1540             MOVE.W #SCRHEIGH-GRASHEIG,D2             ; TOP LEFT Y
00001CF8  383C 01CA               1541             MOVE.W #SCRHEIGH-GRASHEIG+LINEWIDT,D4    ; BOTTOM RIGHT Y
00001CFC  4E4F                    1542             TRAP #15
00001CFE                          1543             
00001CFE                          1544             
00001CFE                          1545  .RED
00001CFE                          1546  
00001CFE                          1547  ; -------------------           RED DE JUEGO      -----------------------------     
00001CFE                          1548             
00001CFE  103C 0050               1549             MOVE.B #80,D0            ; Task pen color
00001D02  7200                    1550             MOVE.L #SEPAPCOL,D1      ; Contorno negro
00001D04  4E4F                    1551             TRAP #15
00001D06                          1552             
00001D06  103C 0051               1553             MOVE.B #81,D0            ; Task fill color
00001D0A  223C 00405711           1554             MOVE.L #SEPAFCOL,D1      ; Verde oscuro
00001D10  4E4F                    1555             TRAP #15
00001D12                          1556             
00001D12  103C 0057               1557             MOVE.B #87,D0            ; Task rectangulo grande
00001D16  323C 013A               1558             MOVE.W #SCRWIDTH/2-SEPAWIDT/2,D1
00001D1A  343C 014A               1559             MOVE.W #SCRHEIGH-GRASHEIG-SEPAHEIG,D2    ; Altura del separador
00001D1E  363C 0146               1560             MOVE.W #SCRWIDTH/2+SEPAWIDT/2,D3
00001D22  383C 01C2               1561             MOVE.W #SCRHEIGH-GRASHEIG,D4
00001D26  4E4F                    1562             TRAP #15           
00001D28                          1563             
00001D28  323C 012E               1564             MOVE.W #SCRWIDTH/2-SESUWIDT/2,D1
00001D2C  3404                    1565             MOVE.W D4,D2
00001D2E  363C 0152               1566             MOVE.W #SCRWIDTH/2+SESUWIDT/2,D3
00001D32  383C 01C6               1567             MOVE.W #SCRHEIGH-GRASHEIG+SESUHEIG,D4
00001D36  4E4F                    1568             TRAP #15
00001D38                          1569             
00001D38                          1570  .ENDPLOT
00001D38  4CDF 001F               1571             MOVEM.L (A7)+,D0-D4      ; Restauramos todos los registros    
00001D3C  4E75                    1572             RTS
00001D3E                          1573  
00001D3E                          1574  ; -- SET WARNING COLOR (USED IN WARNING) --------------------------------------
00001D3E                          1575  .WARNCOL
00001D3E  0C79 0001 000035E0      1576             CMP.W #1,(WARNING1)      ; If the warning count is 1, then the color
00001D46  6700 0018               1577             BEQ .WARN1               ; will be yellow. (Have to check both).
00001D4A  0C79 0001 000035E2      1578             CMP.W #1,(WARNING2)
00001D52  6700 000C               1579             BEQ .WARN1
00001D56                          1580                                      ; Else, the color is red (1+ warning).
00001D56                          1581  .WARN2
00001D56  223C 000000FF           1582             MOVE.L #WARN2COL,D1
00001D5C  6000 0008               1583             BRA .SET
00001D60                          1584  
00001D60                          1585  .WARN1
00001D60  223C 0000CCFF           1586             MOVE.L #WARN1COL,D1
00001D66                          1587  .SET
00001D66                          1588  
00001D66  103C 0050               1589             MOVE.B #80,D0            ; PEN COLOR TASK.
00001D6A                          1590                                      ; COLOR IS ALREADY SET.
00001D6A  4E4F                    1591             TRAP #15                 ; SET.
00001D6C                          1592             
00001D6C  103C 0051               1593             MOVE.B #81,D0            ; FILL COLOR TASK.
00001D70                          1594                                      ; COLOR IS ALREADY SET.
00001D70  4E4F                    1595             TRAP #15                 ; SET.
00001D72                          1596             
00001D72  4E75                    1597             RTS
00001D74                          1598  
00001D74                          1599  
00001D74                          1600  
00001D74                          1601  
00001D74                          1602  
00001D74                          1603  
00001D74                          1604  
00001D74                          1605  
00001D74                          1606  
00001D74                          1607  
00001D74                          1608  
00001D74                          1609  
00001D74                          1610  
00001D74                          1611  
00001D74                          1612  
00001D74                          1613  
00001D74                          1614  
00001D74                          1615  
00001D74                          1616  
00001D74                          1617  
00001D74                          1618  
00001D74                          1619  
00001D74                          1620  
00001D74                          1621  
00001D74                          1622  
00001D74                          1623  
00001D74                          1624  
00001D74                          1625  
00001D74                          1626  -------------------- end include --------------------
00001D74                          1627              INCLUDE "PLAYER1.X68"           ; JUGADOR 1
00001D74                          1628  
00001D74                          1629  ; -----------------------------------------------------------------------------
00001D74                          1630  PLR1INIT
00001D74                          1631  ; INITIALIZES THE PLAYER 
00001D74                          1632  ; INPUT    - NONE
00001D74                          1633  ; OUTPUT   - NONE
00001D74                          1634  ; MODIFIES - NONE
00001D74                          1635  ; -----------------------------------------------------------------------------
00001D74                          1636  
00001D74  33FC 00A0 000035C0      1637              MOVE.W  #SCRWIDTH/4,(PLAYER1X)                     ; INITIAL X.
00001D7C  33FC 01B2 000035C2      1638              MOVE.W  #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER1Y) ; INITIAL Y.
00001D84                          1639              
00001D84  4279 000035C8           1640              CLR.W   (PLR1YACC)        ; INITIAL Y SPEED
00001D8A  4E75                    1641              RTS
00001D8C                          1642  
00001D8C                          1643  ; -----------------------------------------------------------------------------
00001D8C                          1644  PLR1UPD
00001D8C                          1645  ; UPDATES THE PLAYER MOTION
00001D8C                          1646  ; INPUT    - NONE (ACCESSES KBDVAL AND KBDEDGE)
00001D8C                          1647  ; OUTPUT   - NONE (MODIFIES PLAYER DATA)
00001D8C                          1648  ; MODIFIES - NONE
00001D8C                          1649  ; -----------------------------------------------------------------------------
00001D8C                          1650  
00001D8C                          1651  ; --- GRAVITY ---
00001D8C  3039 000035C8           1652              MOVE.W (PLR1YACC),D0    ; Y speed adds to y coord.
00001D92  D179 000035C2           1653              ADD.W D0,(PLAYER1Y)         
00001D98                          1654              
00001D98  5479 000035C8           1655              ADDQ.W  #2,(PLR1YACC)       ; Gravity modifies Y speed for next
00001D9E                          1656                                          ; frame (will fall faster).
00001D9E                          1657              
00001D9E  4279 000035C6           1658              CLR.W (PLR1XACC)    ; This represents the speed of the player in
00001DA4                          1659                                  ; this frame.
00001DA4                          1660              
00001DA4                          1661  ; --- CHECKING GROUND ---
00001DA4  0C79 01B2 000035C2      1662              CMP.W #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER1Y)  ; Correct height?
00001DAC  6D00 0010               1663              BLT .CHCKMODE                                     ; Yes, np.
00001DB0  33FC 01B2 000035C2      1664              MOVE.W #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER1Y) ; No, fix Y.
00001DB8  4239 000035C8           1665              CLR.B (PLR1YACC)                                  ; Also Y speed=0.
00001DBE                          1666              
00001DBE                          1667  .CHCKMODE
00001DBE  0C79 0003 000035EA      1668              CMP.W #ATRMODE,(OPTCHSD)      ; 0=PLAYER, 1=IA, 3=ATRMODE
00001DC6  6700 003A               1669              BEQ .IA
00001DCA                          1670              
00001DCA                          1671  .PLAYER
00001DCA  0839 0004 00002938      1672              BTST.B #KBDBITF1,(KBDVAL)       ; Up key pressed?
00001DD2  6700 0008               1673              BEQ .KEYS1                      ; No: BEQ and skip JSR.
00001DD6  4EB9 00001E22           1674              JSR .MOVEUP                     ; Yes: JSR.
00001DDC                          1675  .KEYS1    
00001DDC  0839 0006 00002938      1676              BTST.B #KBDBITF3,(KBDVAL)       ; Same logic.
00001DE4  6700 0008               1677              BEQ .KEYS2
00001DE8  4EB9 00001E38           1678              JSR .MOVEL
00001DEE                          1679  .KEYS2
00001DEE  0839 0005 00002938      1680              BTST.B #KBDBITF2,(KBDVAL)
00001DF6  6700 0008               1681              BEQ .KEYS3
00001DFA  4EF9 00001E62           1682              JMP .MOVER
00001E00                          1683  .KEYS3
00001E00  4E75                    1684              RTS
00001E02                          1685   
00001E02                          1686  .IA
00001E02  0C79 0140 000035D8      1687              CMP.W #SCRWIDTH/2,(BALLX)   ; If the ball is not on the IA side, it
00001E0A  6E00 007E               1688              BGT .RTS                    ; will not move.
00001E0E                          1689  
00001E0E  3E39 000035C0           1690              MOVE.W (PLAYER1X),D7
00001E14  BE79 000035D8           1691              CMP.W (BALLX),D7
00001E1A  6E00 001C               1692              BGT .MOVEL
00001E1E  6000 0042               1693              BRA .MOVER
00001E22                          1694  
00001E22                          1695  
00001E22                          1696  
00001E22                          1697  
00001E22                          1698  
00001E22                          1699              
00001E22                          1700   
00001E22                          1701  ; --- RESULT OF PRESSED KEYS ---
00001E22                          1702  .MOVEUP
00001E22  0C79 01B2 000035C2      1703              CMP.W   #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER1Y) ; Player in air?
00001E2A  6D00 005E               1704              BLT     .RTS                                     ; Yes: no jump.
00001E2E  33FC FFEC 000035C8      1705              MOVE.W  #-20,(PLR1YACC)        ; No, lets jump setting YSPD.
00001E36  4E75                    1706              RTS
00001E38                          1707  .MOVEL 
00001E38  0C79 0011 000035C0      1708              CMP.W #PLRWIDTH/2+BOUNDMAR,(PLAYER1X) ; Check left bound.
00001E40  6E00 000C               1709              BGT .DOL                                ; If correct: do left.
00001E44  33FC 0011 000035C0      1710              MOVE.W  #PLRWIDTH/2+BOUNDMAR,(PLAYER1X) ; No: correct X.
00001E4C  4E75                    1711              RTS
00001E4E                          1712  .DOL
00001E4E  3E39 000035C4           1713              MOVE.W (PLR1XSPD),D7
00001E54  9F79 000035C0           1714              SUB.W D7,(PLAYER1X)               ; Sub XSPD to X.
00001E5A  9F79 000035C6           1715              SUB.W D7,(PLR1XACC)               ; Player x spd in the frame
00001E60  4E75                    1716              RTS
00001E62                          1717  .MOVER
00001E62  0C79 012A 000035C0      1718              CMP.W #(SCRWIDTH-PLRWIDTH-SEPAWIDT)/2-1,(PLAYER1X) ;Check bound.
00001E6A  6D00 000C               1719              BLT .DOR                                ; If correct: do right.
00001E6E  33FC 012A 000035C0      1720              MOVE.W #(SCRWIDTH-PLRWIDTH-SEPAWIDT)/2-1,(PLAYER1X) ; No:Correct X.
00001E76  4E75                    1721              RTS
00001E78                          1722  .DOR
00001E78  3E39 000035C4           1723              MOVE.W (PLR1XSPD),D7
00001E7E  DF79 000035C0           1724              ADD.W D7,(PLAYER1X)               ; Add XSPD to X.
00001E84  DF79 000035C6           1725              ADD.W D7,(PLR1XACC)               ; Player x spd in the frame.
00001E8A                          1726  
00001E8A                          1727  .RTS                ; The best way to combine branches + RTS.
00001E8A  4E75                    1728              RTS            
00001E8C                          1729  
00001E8C                          1730  ; -----------------------------------------------------------------------------
00001E8C                          1731  PLR1PLOT
00001E8C                          1732  ; PLOTS THE PLAYER
00001E8C                          1733  ; INPUT    - NONE
00001E8C                          1734  ; OUTPUT   - NONE
00001E8C                          1735  ; MODIFIES - D0,D1,D2,D3,D4
00001E8C                          1736  ; -----------------------------------------------------------------------------
00001E8C                          1737  
00001E8C  48E7 F800               1738              MOVEM.L D0-D4,-(A7)     ; Save registers.
00001E90                          1739                         
00001E90  103C 0050               1740              MOVE.B #80,D0           ; Pen color task.
00001E94  7200                    1741              MOVE.L #PLR1PCOL,D1     ; Color.
00001E96  4E4F                    1742              TRAP #15                ; Set.
00001E98                          1743              
00001E98  103C 0051               1744              MOVE.B #81,D0           ; Fill color task.
00001E9C  223C 0000FF00           1745              MOVE.L #PLR1FCOL,D1     ; Color.
00001EA2  4E4F                    1746              TRAP #15                ; Set.
00001EA4                          1747              
00001EA4  103C 0057               1748              MOVE.B #87,D0           ; Drawing player (just a square).
00001EA8  3239 000035C0           1749              MOVE.W (PLAYER1X),D1
00001EAE  3439 000035C2           1750              MOVE.W (PLAYER1Y),D2
00001EB4  3601                    1751              MOVE.W D1,D3
00001EB6  3802                    1752              MOVE.W D2,D4
00001EB8  0441 000F               1753              SUB.W #PLRWIDTH/2,D1
00001EBC  0442 000F               1754              SUB.W #PLRHEIGH/2,D2
00001EC0  0643 000F               1755              ADD.W #PLRWIDTH/2,D3
00001EC4  0644 000F               1756              ADD.W #PLRHEIGH/2,D4
00001EC8  4E4F                    1757              TRAP #15
00001ECA                          1758              
00001ECA  4CDF 001F               1759              MOVEM.L (A7)+,D0-D4     ; Get registers back.
00001ECE  4E75                    1760              RTS
00001ED0                          1761              
00001ED0                          1762  
00001ED0                          1763  
00001ED0                          1764  
00001ED0                          1765  
00001ED0                          1766  
00001ED0                          1767  
00001ED0                          1768  
00001ED0                          1769  
00001ED0                          1770  
00001ED0                          1771  
00001ED0                          1772  
00001ED0                          1773  
00001ED0                          1774  
00001ED0                          1775  
00001ED0                          1776  
00001ED0                          1777  
00001ED0                          1778  
00001ED0                          1779  
00001ED0                          1780  
00001ED0                          1781  
00001ED0                          1782  
00001ED0                          1783  
00001ED0                          1784  
00001ED0                          1785  
00001ED0                          1786  
00001ED0                          1787  
00001ED0                          1788  
00001ED0                          1789  
00001ED0                          1790  
00001ED0                          1791  
00001ED0                          1792  
00001ED0                          1793  
00001ED0                          1794  
00001ED0                          1795  
00001ED0                          1796  
00001ED0                          1797  
00001ED0                          1798  
00001ED0                          1799  
00001ED0                          1800  
00001ED0                          1801  
00001ED0                          1802  
00001ED0                          1803  
00001ED0                          1804  -------------------- end include --------------------
00001ED0                          1805              INCLUDE "PLAYER2.X68"           ; JUGADOR 2
00001ED0                          1806  
00001ED0                          1807  ; -----------------------------------------------------------------------------
00001ED0                          1808  PLR2INIT
00001ED0                          1809  ; INITIALIZES THE PLAYER 
00001ED0                          1810  ; INPUT    - NONE
00001ED0                          1811  ; OUTPUT   - NONE
00001ED0                          1812  ; MODIFIES - NONE
00001ED0                          1813  ; -----------------------------------------------------------------------------
00001ED0                          1814  
00001ED0  33FC 01E0 000035CC      1815              MOVE.W  #3*(SCRWIDTH/4),(PLAYER2X)                 ; INITIAL X.
00001ED8  33FC 01B2 000035CE      1816              MOVE.W  #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER2Y) ; INITIAL Y.
00001EE0                          1817              
00001EE0  4279 000035D4           1818              CLR.W   (PLR2YACC)        ; INITIAL Y SPEED
00001EE6  4E75                    1819              RTS
00001EE8                          1820  
00001EE8                          1821  ; -----------------------------------------------------------------------------
00001EE8                          1822  PLR2UPD
00001EE8                          1823  ; UPDATES THE PLAYER MOTION
00001EE8                          1824  ; INPUT    - NONE (ACCESSES KBDVAL AND KBDEDGE)
00001EE8                          1825  ; OUTPUT   - NONE (MODIFIES PLAYER DATA)
00001EE8                          1826  ; MODIFIES - NONE
00001EE8                          1827  ; -----------------------------------------------------------------------------
00001EE8                          1828  
00001EE8                          1829  ; --- GRAVITY ---
00001EE8  3039 000035D4           1830              MOVE.W (PLR2YACC),D0    ; Y speed adds to y coord.
00001EEE  D179 000035CE           1831              ADD.W D0,(PLAYER2Y)         
00001EF4                          1832              
00001EF4  5479 000035D4           1833              ADDQ.W  #2,(PLR2YACC)       ; Gravity modifies Y speed for next
00001EFA                          1834                                          ; frame (will fall faster).
00001EFA                          1835              
00001EFA  4279 000035D2           1836              CLR.W (PLR2XACC)    ; This represents the speed of the player in
00001F00                          1837                                  ; this frame.
00001F00                          1838              
00001F00                          1839  ; --- CHECKING GROUND ---
00001F00  0C79 01B2 000035CE      1840              CMP.W #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER2Y)  ; Correct height?
00001F08  6D00 0010               1841              BLT .CHCKMODE                                     ; Yes, np.
00001F0C  33FC 01B2 000035CE      1842              MOVE.W #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER2Y) ; No, fix Y.
00001F14  4239 000035D4           1843              CLR.B (PLR2YACC)                                  ; Also Y speed=0.
00001F1A                          1844              
00001F1A                          1845  .CHCKMODE
00001F1A  0C79 0000 000035EA      1846              CMP.W #VSPLAYER,(OPTCHSD)      ; 0=PLAYER, 1=IA, 3=ATRMODE
00001F22  6600 003A               1847              BNE .IA
00001F26                          1848              
00001F26                          1849  .PLAYER
00001F26  0839 0001 00002938      1850              BTST.B #KBDBITUP,(KBDVAL)       ; Up key pressed?
00001F2E  6700 0008               1851              BEQ .KEYS1                      ; No: BEQ and skip JSR.
00001F32  4EB9 00001F7E           1852              JSR .MOVEUP                     ; Yes: JSR.
00001F38                          1853  .KEYS1    
00001F38  0839 0000 00002938      1854              BTST.B #KBDBITLF,(KBDVAL)       ; Same logic.
00001F40  6700 0008               1855              BEQ .KEYS2
00001F44  4EB9 00001F94           1856              JSR .MOVEL
00001F4A                          1857  .KEYS2
00001F4A  0839 0002 00002938      1858              BTST.B #KBDBITRT,(KBDVAL)
00001F52  6700 0008               1859              BEQ .KEYS3
00001F56  4EF9 00001FBE           1860              JMP .MOVER
00001F5C                          1861  .KEYS3
00001F5C  4E75                    1862              RTS
00001F5E                          1863              
00001F5E                          1864  .IA
00001F5E  0C79 0140 000035D8      1865              CMP.W #SCRWIDTH/2,(BALLX)   ; If the ball is not on the IA side, it
00001F66  6D00 007E               1866              BLT .RTS                    ; will not move.
00001F6A                          1867  
00001F6A  3E39 000035CC           1868              MOVE.W (PLAYER2X),D7
00001F70  BE79 000035D8           1869              CMP.W (BALLX),D7
00001F76  6E00 001C               1870              BGT .MOVEL
00001F7A  6000 0042               1871              BRA .MOVER
00001F7E                          1872  
00001F7E                          1873  
00001F7E                          1874  
00001F7E                          1875  
00001F7E                          1876  
00001F7E                          1877              
00001F7E                          1878   
00001F7E                          1879  ; --- RESULT OF PRESSED KEYS ---
00001F7E                          1880  .MOVEUP
00001F7E  0C79 01B2 000035CE      1881              CMP.W   #SCRHEIGH-GRASHEIG-1-PLRHEIGH/2,(PLAYER2Y) ; Player in air?
00001F86  6D00 005E               1882              BLT     .RTS                                     ; Yes: no jump.
00001F8A  33FC FFEC 000035D4      1883              MOVE.W  #-20,(PLR2YACC)        ; No, lets jump setting YSPD.
00001F92  4E75                    1884              RTS
00001F94                          1885  .MOVEL 
00001F94  0C79 0156 000035CC      1886              CMP.W   #(SCRWIDTH+PLRWIDTH+SEPAWIDT)/2+1,(PLAYER2X) ; Check left
00001F9C  6E00 000C               1887              BGT     .DOL                                ; If correct: do left.
00001FA0  33FC 0156 000035CC      1888              MOVE.W  #(SCRWIDTH+PLRWIDTH+SEPAWIDT)/2+1,(PLAYER2X) ;No:correct X.
00001FA8  4E75                    1889              RTS
00001FAA                          1890  .DOL
00001FAA  3E39 000035D0           1891              MOVE.W  (PLR2XSPD),D7
00001FB0  9F79 000035CC           1892              SUB.W   D7,(PLAYER2X)               ; Sub XSPD to X.
00001FB6  9F79 000035D2           1893              SUB.W   D7,(PLR2XACC)               ; Player x spd in the frame
00001FBC  4E75                    1894              RTS
00001FBE                          1895  .MOVER
00001FBE  0C79 026F 000035CC      1896              CMP.W   #SCRWIDTH-PLRWIDTH/2-BOUNDMAR,(PLAYER2X) ;Check bound.
00001FC6  6D00 000C               1897              BLT     .DOR                                ; If correct: do right.
00001FCA  33FC 026F 000035CC      1898              MOVE.W  #SCRWIDTH-PLRWIDTH/2-BOUNDMAR,(PLAYER2X) ; No:Correct X.
00001FD2  4E75                    1899              RTS
00001FD4                          1900  .DOR
00001FD4  3E39 000035D0           1901              MOVE.W  (PLR2XSPD),D7
00001FDA  DF79 000035CC           1902              ADD.W   D7,(PLAYER2X)               ; Add XSPD to X.
00001FE0  DF79 000035D2           1903              ADD.W   D7,(PLR2XACC)               ; Player x spd in the frame.
00001FE6                          1904  
00001FE6                          1905  .RTS                ; The best way to combine branches + RTS.
00001FE6  4E75                    1906              RTS
00001FE8                          1907              
00001FE8                          1908  ; -----------------------------------------------------------------------------
00001FE8                          1909  PLR2PLOT
00001FE8                          1910  ; PLOTS THE PLAYER
00001FE8                          1911  ; INPUT    - NONE
00001FE8                          1912  ; OUTPUT   - NONE
00001FE8                          1913  ; MODIFIES - D0,D1,D2,D3,D4
00001FE8                          1914  ; -----------------------------------------------------------------------------
00001FE8                          1915  
00001FE8  48E7 F800               1916              MOVEM.L D0-D4,-(A7)     ; Save registers.
00001FEC                          1917                         
00001FEC  103C 0050               1918              MOVE.B #80,D0           ; Pen color task.
00001FF0  7200                    1919              MOVE.L #PLR2PCOL,D1     ; Color.
00001FF2  4E4F                    1920              TRAP #15                ; Set.
00001FF4                          1921              
00001FF4  103C 0051               1922              MOVE.B #81,D0           ; Fill color task.
00001FF8  223C 00BBBB00           1923              MOVE.L #PLR2FCOL,D1     ; Color.
00001FFE  4E4F                    1924              TRAP #15                ; Set.
00002000                          1925              
00002000  103C 0057               1926              MOVE.B #87,D0           ; Drawing player (just a square).
00002004  3239 000035CC           1927              MOVE.W (PLAYER2X),D1
0000200A  3439 000035CE           1928              MOVE.W (PLAYER2Y),D2
00002010  3601                    1929              MOVE.W D1,D3
00002012  3802                    1930              MOVE.W D2,D4
00002014  0441 000F               1931              SUB.W #PLRWIDTH/2,D1
00002018  0442 000F               1932              SUB.W #PLRHEIGH/2,D2
0000201C  0643 000F               1933              ADD.W #PLRWIDTH/2,D3
00002020  0644 000F               1934              ADD.W #PLRHEIGH/2,D4
00002024  4E4F                    1935              TRAP #15
00002026                          1936              
00002026  4CDF 001F               1937              MOVEM.L (A7)+,D0-D4     ; Get registers back.
0000202A  4E75                    1938              RTS
0000202C                          1939              
0000202C                          1940  
0000202C                          1941  
0000202C                          1942  
0000202C                          1943  
0000202C                          1944  
0000202C                          1945  
0000202C                          1946  
0000202C                          1947  
0000202C                          1948  
0000202C                          1949  
0000202C                          1950  
0000202C                          1951  
0000202C                          1952  
0000202C                          1953  
0000202C                          1954  
0000202C                          1955  
0000202C                          1956  
0000202C                          1957  
0000202C                          1958  
0000202C                          1959  
0000202C                          1960  
0000202C                          1961  
0000202C                          1962  
0000202C                          1963  
0000202C                          1964  
0000202C                          1965  
0000202C                          1966  
0000202C                          1967  
0000202C                          1968  
0000202C                          1969  
0000202C                          1970  
0000202C                          1971  
0000202C                          1972  
0000202C                          1973  
0000202C                          1974  
0000202C                          1975  
0000202C                          1976  
0000202C                          1977  
0000202C                          1978  
0000202C                          1979  
0000202C                          1980  
0000202C                          1981  
0000202C                          1982  
0000202C                          1983  
0000202C                          1984  
0000202C                          1985  
0000202C                          1986  
0000202C                          1987  
0000202C                          1988  
0000202C                          1989  
0000202C                          1990  
0000202C                          1991  -------------------- end include --------------------
0000202C                          1992              INCLUDE "BALL.X68"              ; PELOTA
0000202C                          1993  ; -----------------------------------------------------------------------------
0000202C                          1994  BALLINIT
0000202C                          1995  ; INITS THE BALL
0000202C                          1996  ; INPUT    - NONE
0000202C                          1997  ; OUTPUT   - NONE
0000202C                          1998  ; MODIFIES - NONE
0000202C                          1999  ; -----------------------------------------------------------------------------
0000202C  33FC 0140 000035D8      2000              MOVE.W #SCRWIDTH/2,(BALLX)   ; Starting X coord.
00002034  33FC 00FA 000035DA      2001              MOVE.W #250,(BALLY)          ; Starting Y coord.
0000203C                          2002      
0000203C  33FC FFE7 000035DE      2003              MOVE.W #-25,(BALLYSPD)  ; Starting Y speed.
00002044  3C3C FFFA               2004              MOVE.W #-6,D6           ; Starting X speed (it will go to the
00002048                          2005                                      ; player losing, in case of a tie it will
00002048                          2006                                      ; go to left player).
00002048  3E39 000035CA           2007              MOVE.W (SCORE1),D7
0000204E  BE79 000035D6           2008              CMP.W (SCORE2),D7
00002054  6F00 0006               2009              BLE .MOVEXSPD
00002058  CDFC FFFF               2010              MULS.W #-1,D6
0000205C                          2011  .MOVEXSPD
0000205C  33C6 000035DC           2012              MOVE.W D6,(BALLXSPD)
00002062                          2013                          
00002062  4E75                    2014              RTS
00002064                          2015  
00002064                          2016  ; -----------------------------------------------------------------------------
00002064                          2017  BALLUPD
00002064                          2018  ; UPDATES THE BALL
00002064                          2019  ; INPUT    - NONE
00002064                          2020  ; OUTPUT   - NONE
00002064                          2021  ; MODIFIES - NONE
00002064                          2022  ; -----------------------------------------------------------------------------
00002064                          2023  
00002064                          2024  ; --- SETTING BALL X&Y TOP SPEED --- (IT MUST NOT GO TOO FAST)
00002064                          2025  ; -- X
00002064                          2026  .XSIGN
00002064  0C79 0000 000035DC      2027              CMP.W   #0,(BALLXSPD)
0000206C  6D00 001A               2028              BLT     .XNEG
00002070                          2029  .XPOS
00002070  0C79 001E 000035DC      2030              CMP.W   #BALLXTOP,(BALLXSPD)
00002078  6D00 0022               2031              BLT     .YSIGN
0000207C  33FC 001E 000035DC      2032              MOVE.W  #BALLXTOP,(BALLXSPD)
00002084  6000 0016               2033              BRA     .YSIGN
00002088                          2034  .XNEG    
00002088  0C79 FFE2 000035DC      2035              CMP.W   #-BALLXTOP,(BALLXSPD)
00002090  6E00 000A               2036              BGT     .YSIGN
00002094  33FC FFE2 000035DC      2037              MOVE.W  #-BALLXTOP,(BALLXSPD)
0000209C                          2038  ; -- Y
0000209C                          2039  .YSIGN
0000209C  0C79 0000 000035DE      2040              CMP.W   #0,(BALLYSPD)
000020A4  6D00 001A               2041              BLT     .YNEG
000020A8                          2042  .YPOS
000020A8  0C79 001E 000035DE      2043              CMP.W   #BALLYTOP,(BALLYSPD)
000020B0  6D00 0022               2044              BLT     VERTICAL
000020B4  33FC 001E 000035DE      2045              MOVE.W  #BALLYTOP,(BALLYSPD)
000020BC  6000 0016               2046              BRA     VERTICAL
000020C0                          2047  .YNEG    
000020C0  0C79 FFE2 000035DE      2048              CMP.W   #-BALLYTOP,(BALLYSPD)
000020C8  6E00 000A               2049              BGT     VERTICAL
000020CC  33FC FFE2 000035DE      2050              MOVE.W  #-BALLYTOP,(BALLYSPD)
000020D4                          2051  
000020D4                          2052  ;------------------------- VERTICAL -------------------------------------------
000020D4                          2053  VERTICAL
000020D4  3039 000035DE           2054              MOVE.W (BALLYSPD),D0            ; Vertical speed in D0.
000020DA  D179 000035DA           2055              ADD.W   D0,(BALLY)                ; Y speed modifies Y.                 
000020E0  5440                    2056              ADDQ.W  #2,D0
000020E2  33C0 000035DE           2057              MOVE.W  D0,(BALLYSPD)           ; Gravity modifies Y speed.
000020E8                          2058  .CHECKTOP
000020E8  0C79 000B 000035DA      2059              CMP.W   #BALLRAD+1,(BALLY)
000020F0  6E00 0014               2060              BGT     .CHECKBOT
000020F4                          2061  .TOPFIX
000020F4  33FC 000B 000035DA      2062              MOVE.W  #BALLRAD+1,(BALLY)
000020FC  4EB9 00002386           2063              JSR     NEGYSPD
00002102  6000 00D2               2064              BRA     .PLAYER1   
00002106                          2065  .TOPFIXED            
00002106                          2066  .CHECKBOT
00002106  0C79 01B7 000035DA      2067              CMP.W #SCRHEIGH-1-GRASHEIG-BALLRAD,(BALLY) ; Check bottom or under.
0000210E  6D00 00C6               2068              BLT .PLAYER1                            ; Si no, pasamos a lateral.
00002112                          2069  .FIXBOT
00002112  33FC 01B7 000035DA      2070              MOVE.W  #SCRHEIGH-1-GRASHEIG-BALLRAD,(BALLY) ; Fix position
0000211A                          2071              
0000211A  4EB9 000023A0           2072              JSR     FRICYSPD
00002120  4EB9 00002386           2073              JSR     NEGYSPD
00002126                          2074              
00002126  0C79 0140 000035D8      2075              CMP.W   #SCRWIDTH/2,(BALLX) ; Lets check which team got scored.
0000212E  6E00 0056               2076              BGT     .ZONE2HIT
00002132                          2077  .ZONE1HIT
00002132  0C79 0002 000035E0      2078              CMP.W   #TOUCHES,(WARNING1) ; Only add point if it touched twice.
0000213A  6600 002E               2079              BNE .NOSCORE1
0000213E                          2080              
0000213E  5279 000035D6           2081              ADDQ.W  #1,(SCORE2)         ; +1 point,
00002144                          2082              
00002144  0C79 0003 000035EA      2083              CMP.W #3,(OPTCHSD)          ; 0=PLAYER, 1=IA, 3=ATTRACT MODE
0000214C  6600 0014               2084              BNE .NOADD1
00002150                          2085                                          ; If vs IA, we will add as much speed
00002150                          2086                                          ; as goals it has been scored.
00002150  3E39 000035C4           2087              MOVE.W (PLR1XSPD),D7
00002156  DE79 000028FA           2088              ADD.W (SPEEDIA),D7
0000215C  33C7 000035C4           2089              MOVE.W D7,(PLR1XSPD)        ; SPEED = BASEXSPDD + RIVAL GOALS
00002162                          2090  .NOADD1
00002162  33FC 0002 000035E8      2091              MOVE.W #STACOUNT,(STANEXT)    ; Activate countdown for next point.
0000216A                          2092  .NOSCORE1
0000216A  5279 000035E0           2093              ADDQ.W  #1,(WARNING1)
00002170                          2094  
00002170  0C79 0007 000035D6      2095              CMP.W   #MAXSCORE,(SCORE2)  ; Avoid goals overflow error.
00002178  6F00 005C               2096              BLE.W   .PLAYER1            ; If 7 or less goals, OK.
0000217C                          2097              
0000217C  4279 000035D6           2098              CLR.W   (SCORE2)            ; This line will never be reached, as
00002182                          2099                                          ; we go to gameover state before we get
00002182                          2100                                          ; here, but it exists 'just in case' 
00002182                          2101                                          ; (the scoreboard does not process a
00002182                          2102                                          ; score higher than 7).
00002182  6000 0052               2103              BRA     .PLAYER1
00002186                          2104  .ZONE2HIT                               ; Same but opposite case.
00002186  0C79 0002 000035E2      2105              CMP.W   #TOUCHES,(WARNING2)
0000218E  6600 002E               2106              BNE .NOSCORE2
00002192                          2107              
00002192  5279 000035CA           2108              ADDQ.W  #1,(SCORE1)
00002198                          2109              
00002198  0C79 0000 000035EA      2110              CMP.W #0,(OPTCHSD)          ; 0=PLAYER, 1=IA, 3=ATTRACT MODE
000021A0  6700 0014               2111              BEQ .NOADD2
000021A4                          2112                                          ; If vs IA, we will add as much speed
000021A4                          2113                                          ; as goals it has been scored.
000021A4  3E39 000035D0           2114              MOVE.W (PLR2XSPD),D7
000021AA  DE79 000028FA           2115              ADD.W (SPEEDIA),D7
000021B0  33C7 000035D0           2116              MOVE.W D7,(PLR2XSPD)        ; SPEED = BASEXSPDD + RIVAL GOALS
000021B6                          2117  .NOADD2            
000021B6  33FC 0002 000035E8      2118              MOVE.W #STACOUNT,(STANEXT)
000021BE                          2119  .NOSCORE2
000021BE  5279 000035E2           2120              ADDQ.W  #1,(WARNING2)
000021C4                          2121              
000021C4  0C79 0007 000035CA      2122              CMP.W   #MAXSCORE,(SCORE1)
000021CC  6F00 0008               2123              BLE.W   .PLAYER1
000021D0                          2124              
000021D0  4279 000035CA           2125              CLR.W   (SCORE1)            ; Same as above.
000021D6                          2126  .SEPATOP    ;POR HACER
000021D6                          2127  
000021D6                          2128  ; --- PLAYER1-BALL COLLISIONS ---
000021D6                          2129  .PLAYER1
000021D6                          2130  
000021D6  3039 000035C0           2131              MOVE.W  (PLAYER1X),D0
000021DC  3200                    2132              MOVE.W  D0,D1
000021DE                          2133  .LEFTZONE               ; Discards left zone.
000021DE  0441 0014               2134              SUB.W   #BALLRAD/2+PLRWIDTH/2,D1
000021E2  B279 000035D8           2135              CMP.W   (BALLX),D1
000021E8  6E00 006E               2136              BGT     ENDPLR1
000021EC                          2137  .RGHTZONE               ; Discards right zone.            
000021EC  3200                    2138              MOVE.W  D0,D1
000021EE  0641 0014               2139              ADD.W   #BALLRAD/2+PLRWIDTH/2,D1
000021F2  B279 000035D8           2140              CMP.W   (BALLX),D1
000021F8  6D00 005E               2141              BLT     ENDPLR1
000021FC                          2142  .TOPZONE               ; Discards top zone.
000021FC  3039 000035C2           2143              MOVE.W  (PLAYER1Y),D0
00002202  0440 000F               2144              SUB.W   #PLRHEIGH/2,D0
00002206  0440 0014               2145              SUB.W   #2*BALLRAD,D0 ; We substract an extra ballrad/2 for hitbox.
0000220A  B079 000035DA           2146              CMP.W   (BALLY),D0
00002210  6E00 0046               2147              BGT     ENDPLR1
00002214                          2148  .BOTZONE               ; Discards bottom zone.
00002214  3039 000035C2           2149              MOVE.W  (PLAYER1Y),D0
0000221A  0640 000F               2150              ADD.W   #PLRHEIGH/2,D0
0000221E  5A40                    2151              ADD.W   #BALLRAD/2,D0
00002220  B079 000035DA           2152              CMP.W   (BALLY),D0
00002226  6D00 0030               2153              BLT     ENDPLR1
0000222A                          2154                          ; Confirmed: player 1 is in touch with the ball.
0000222A                          2155  
0000222A  3039 000035DE           2156              MOVE.W  (BALLYSPD),D0   ; Accelerate a bit the ball towards
00002230  5440                    2157              ADD.W   #2,D0           ; the air.
00002232  C1FC FFFF               2158              MULS.W  #-1,D0
00002236  33C0 000035DE           2159              MOVE.W  D0,(BALLYSPD)
0000223C                          2160              
0000223C  3039 000035C2           2161              MOVE.W  (PLAYER1Y),D0               ; Fix ball collision.
00002242  0440 0023               2162              SUB.W   #PLRHEIGH/2+2*BALLRAD,D0
00002246  33C0 000035DA           2163              MOVE.W  D0,(BALLY)
0000224C                          2164  
0000224C  3039 000035C6           2165              MOVE.W  (PLR1XACC),D0   ; If the player was moving in this frame,
00002252  D179 000035DC           2166              ADD.W   D0,(BALLXSPD)   ; the ball will receive an x boost.
00002258                          2167  
00002258                          2168  ENDPLR1
00002258                          2169  ; --- PLAYER2-BALL COLLISIONS ---
00002258                          2170  .PLAYER2
00002258  3039 000035CC           2171              MOVE.W  (PLAYER2X),D0
0000225E  3200                    2172              MOVE.W  D0,D1
00002260                          2173  .LEFTZONE               ; Discards left zone.
00002260  0441 0014               2174              SUB.W   #BALLRAD/2+PLRWIDTH/2,D1
00002264  B279 000035D8           2175              CMP.W   (BALLX),D1
0000226A  6E00 006E               2176              BGT     ENDPLR2
0000226E                          2177  .RGHTZONE               ; Discards right zone.
0000226E  3200                    2178              MOVE.W  D0,D1
00002270  0641 0014               2179              ADD.W   #BALLRAD/2+PLRWIDTH/2,D1
00002274  B279 000035D8           2180              CMP.W   (BALLX),D1
0000227A  6D00 005E               2181              BLT     ENDPLR2
0000227E                          2182  .TOPZONE               ; Discards top zone.
0000227E  3039 000035CE           2183              MOVE.W  (PLAYER2Y),D0
00002284  0440 000F               2184              SUB.W   #PLRHEIGH/2,D0
00002288  0440 0014               2185              SUB.W   #BALLRAD*2,D0
0000228C  B079 000035DA           2186              CMP.W   (BALLY),D0
00002292  6E00 0046               2187              BGT     ENDPLR2
00002296                          2188  .BOTZONE               ; Discards bottom zone.
00002296  3039 000035CE           2189              MOVE.W  (PLAYER2Y),D0
0000229C  0640 000F               2190              ADD.W   #PLRHEIGH/2,D0
000022A0  5A40                    2191              ADD.W   #BALLRAD/2,D0
000022A2  B079 000035DA           2192              CMP.W   (BALLY),D0
000022A8  6D00 0030               2193              BLT     ENDPLR2
000022AC                          2194                          ; Confirmed: player 2 is in touch with the ball.
000022AC                          2195              
000022AC  3039 000035DE           2196              MOVE.W  (BALLYSPD),D0   ; Accelerate a bit the ball towards
000022B2  5440                    2197              ADD.W   #2,D0           ; the air.
000022B4  C1FC FFFF               2198              MULS.W  #-1,D0
000022B8  33C0 000035DE           2199              MOVE.W  D0,(BALLYSPD)
000022BE                          2200              
000022BE  3039 000035CE           2201              MOVE.W  (PLAYER2Y),D0               ; Fix ball collision.
000022C4  0440 0023               2202              SUB.W   #PLRHEIGH/2+BALLRAD*2,D0
000022C8  33C0 000035DA           2203              MOVE.W  D0,(BALLY)
000022CE                          2204  
000022CE  3039 000035D2           2205              MOVE.W  (PLR2XACC),D0   ; If the player was moving in this frame,
000022D4  D179 000035DC           2206              ADD.W   D0,(BALLXSPD)   ; the ball will receive an x boost.
000022DA                          2207  ENDPLR2
000022DA                          2208              
000022DA                          2209  ; ---------------------------- LATERAL COLLISION ------------------------------
000022DA                          2210  .LATERAL
000022DA  3039 000035DC           2211              MOVE.W  (BALLXSPD),D0       ; Ball speed adds to X coordinate.
000022E0  D179 000035D8           2212              ADD.W   D0,(BALLX)
000022E6                          2213              
000022E6                          2214  ; ----- BOUNDS -----
000022E6  0C79 000C 000035D8      2215              CMP.W   #BOUNDMAR+BALLRAD,(BALLX)
000022EE  6D00 0074               2216              BLT     .LBOUND
000022F2                          2217  
000022F2  0C79 0274 000035D8      2218              CMP.W   #SCRWIDTH-BOUNDMAR-BALLRAD,(BALLX)
000022FA  6E00 0056               2219              BGT     .RBOUND
000022FE                          2220              
000022FE                          2221  ; ----- SEPARATOR -----
000022FE  0C79 012F 000035D8      2222              CMP.W   #SCRWIDTH/2-SEPAWIDT/2-BALLRAD-1,(BALLX)
00002306  6D00 006A               2223              BLT     .ENDMOVE
0000230A                          2224     
0000230A  0C79 0151 000035D8      2225              CMP.W   #SCRWIDTH/2+SEPAWIDT/2+BALLRAD+1,(BALLX)
00002312  6E00 005E               2226              BGT     .ENDMOVE
00002316                          2227              
00002316  0C79 013F 000035DA      2228              CMP.W   #SCRHEIGH-GRASHEIG-SEPAHEIG-BALLRAD-1,(BALLY)
0000231E  6D00 0052               2229              BLT     .ENDMOVE
00002322                          2230              ; Separator collision
00002322                          2231                                  
00002322  0C79 0000 000035DC      2232              CMP.W   #0,(BALLXSPD)   ; If XSPD is positive, we touched the
0000232A  6D00 0014               2233              BLT     .LSEP           ; separator from the left.
0000232E                          2234  .RSEP
0000232E  33FC 012F 000035D8      2235              MOVE.W  #SCRWIDTH/2-SEPAWIDT/2-BALLRAD-1,(BALLX)
00002336  4EB9 00002374           2236              JSR     NEGXSPD
0000233C  6000 0034               2237              BRA     .ENDMOVE
00002340                          2238  .LSEP
00002340  33FC 0151 000035D8      2239              MOVE.W  #SCRWIDTH/2+SEPAWIDT/2+BALLRAD+1,(BALLX)  
00002348  4EB9 00002374           2240              JSR     NEGXSPD
0000234E  6000 0022               2241              BRA     .ENDMOVE    
00002352                          2242  
00002352                          2243  .RBOUND
00002352  33FC 0274 000035D8      2244              MOVE.W  #SCRWIDTH-BOUNDMAR-BALLRAD,(BALLX)
0000235A  4EB9 00002374           2245              JSR     NEGXSPD
00002360  6000 0010               2246              BRA     .ENDMOVE
00002364                          2247  .LBOUND
00002364  33FC 000C 000035D8      2248              MOVE.W  #BOUNDMAR+BALLRAD,(BALLX)
0000236C  4EB9 00002374           2249              JSR     NEGXSPD
00002372                          2250  .ENDMOVE
00002372  4E75                    2251              RTS
00002374                          2252  
00002374                          2253              
00002374                          2254  ; --- UPDATE SUBRUTINES --------------------------
00002374                          2255  
00002374                          2256  ; IT WILL NEGATE THE X AXIS SPEED OF THE BALL,
00002374                          2257  NEGXSPD
00002374  3E39 000035DC           2258      MOVE.W (BALLXSPD),D7
0000237A  CFFC FFFF               2259      MULS.W #-1,D7
0000237E  33C7 000035DC           2260      MOVE.W D7,(BALLXSPD)
00002384  4E75                    2261      RTS
00002386                          2262      
00002386                          2263  ; IT WILL NEGATE THE Y AXIS SPEED OF THE BALL.
00002386                          2264  NEGYSPD
00002386  3E39 000035DE           2265      MOVE.W (BALLYSPD),D7
0000238C  CFFC FFFF               2266      MULS.W #-1,D7
00002390  33C7 000035DE           2267      MOVE.W D7,(BALLYSPD)
00002396  4E75                    2268      RTS
00002398                          2269      
00002398                          2270  ; APPLIES FRICTION TO SPEED OF THE BALL. SIGN DOES NOT MATTER, IT WILL BE
00002398                          2271  ; USED BEFORE OR AFTER THE NEGATION OF THE SPEED. BE VERY CAREFUL!!!
00002398                          2272  ; IT SUBSTRACTS X SPEED. SPEED MUST BE POSITIVE.
00002398                          2273  FRICXSPD
00002398  5379 000035DC           2274      SUB.W   #BALLFRX,(BALLXSPD)
0000239E  4E75                    2275      RTS
000023A0                          2276      
000023A0                          2277  ; IT SUBSTRACTS Y SPEED. SPEED MUST BE POSITIVE.
000023A0                          2278  FRICYSPD
000023A0  5779 000035DE           2279      SUB.W   #BALLFRY,(BALLYSPD)
000023A6  4E75                    2280      RTS
000023A8                          2281  
000023A8                          2282  ; -----------------------------------------------------------------------------
000023A8                          2283  BALLPLOT
000023A8                          2284  ; PLOTS THE BALL
000023A8                          2285  ; INPUT    - NONE
000023A8                          2286  ; OUTPUT   - NONE
000023A8                          2287  ; MODIFIES - NONE
000023A8                          2288  ; -----------------------------------------------------------------------------
000023A8  48E7 F800               2289              MOVEM.L D0-D4,-(A7)
000023AC                          2290              
000023AC  103C 0050               2291              MOVE.B #80,D0           ; Pen color task.
000023B0  7200                    2292              MOVE.L #BALLPCOL,D1     ; Color.
000023B2  4E4F                    2293              TRAP #15
000023B4                          2294              
000023B4  103C 0051               2295              MOVE.B #81,D0           ; Fill color rask.
000023B8  223C 0000FFFF           2296              MOVE.L #BALLFCOL,D1     ; Color.
000023BE  4E4F                    2297              TRAP #15
000023C0                          2298              
000023C0  103C 0058               2299              MOVE.B #88,D0           ; Draw ellipse.
000023C4  3239 000035D8           2300              MOVE.W (BALLX),D1
000023CA  3439 000035DA           2301              MOVE.W (BALLY),D2
000023D0  3601                    2302              MOVE.W D1,D3
000023D2  3802                    2303              MOVE.W D2,D4
000023D4  0441 000A               2304              SUB.W #BALLRAD,D1
000023D8  0442 000A               2305              SUB.W #BALLRAD,D2
000023DC  0643 000A               2306              ADD.W #BALLRAD,D3
000023E0  0644 000A               2307              ADD.W #BALLRAD,D4
000023E4  4E4F                    2308              TRAP #15
000023E6                          2309         
000023E6  4CDF 001F               2310              MOVEM.L (A7)+,D0-D4
000023EA  4E75                    2311              RTS
000023EC                          2312  
000023EC                          2313  
000023EC                          2314  
000023EC                          2315  
000023EC                          2316  
000023EC                          2317  
000023EC                          2318  
000023EC                          2319  
000023EC                          2320  
000023EC                          2321  
000023EC                          2322  
000023EC                          2323  
000023EC                          2324  
000023EC                          2325  
000023EC                          2326  
000023EC                          2327  
000023EC                          2328  
000023EC                          2329  
000023EC                          2330  
000023EC                          2331  
000023EC                          2332  
000023EC                          2333  
000023EC                          2334  
000023EC                          2335  
000023EC                          2336  
000023EC                          2337  
000023EC                          2338  
000023EC                          2339  
000023EC                          2340  
000023EC                          2341  
000023EC                          2342  
000023EC                          2343  
000023EC                          2344  
000023EC                          2345  
000023EC                          2346  
000023EC                          2347  
000023EC                          2348  
000023EC                          2349  
000023EC                          2350  
000023EC                          2351  
000023EC                          2352  
000023EC                          2353  
000023EC                          2354  
000023EC                          2355  
000023EC                          2356  
000023EC                          2357  
000023EC                          2358  
000023EC                          2359  
000023EC                          2360  
000023EC                          2361  
000023EC                          2362  
000023EC                          2363  
000023EC                          2364  
000023EC                          2365  
000023EC                          2366  
000023EC                          2367  
000023EC                          2368  
000023EC                          2369  
000023EC                          2370  
000023EC                          2371  
000023EC                          2372  
000023EC                          2373  
000023EC                          2374  -------------------- end include --------------------
000023EC                          2375              INCLUDE "NUMBERS.X68"           ; DIBUJADO DE PUNTUACIONES
000023EC                          2376  
000023EC                          2377  DRAWSC1
000023EC  48E7 0680               2378             MOVEM.L D5-D6/A0,-(A7)
000023F0  3F00                    2379             MOVE.W D0,-(A7)
000023F2                          2380              
000023F2  4EB9 00002468           2381             JSR NUMCOL               ; Get team 1 colors
000023F8  3A3C 00A0               2382             MOVE.W   #BOARD1X,D5     ; Get board 1 x coord.
000023FC  3C3C 0078               2383             MOVE.W   #BOARDY,D6
00002400                          2384             
00002400                          2385  
00002400  3039 000035CA           2386             MOVE.W (SCORE1),D0
00002406  48C0                    2387             EXT.L D0
00002408  E588                    2388             LSL.L #2,D0
0000240A  2040                    2389             MOVE.L D0,A0
0000240C  2068 2448               2390             MOVE.L SCORVECT(A0),A0
00002410  4E90                    2391             JSR (A0)
00002412                          2392  
00002412  301F                    2393             MOVE.W (A7)+,D0
00002414  4CDF 0160               2394             MOVEM.L (A7)+,D5-D6/A0
00002418  4E75                    2395             RTS
0000241A                          2396  
0000241A                          2397  
0000241A                          2398  DRAWSC2
0000241A  48E7 0680               2399             MOVEM.L D5-D6/A0,-(A7)
0000241E  3F00                    2400             MOVE.W D0,-(A7)
00002420                          2401              
00002420  4EB9 00002468           2402             JSR NUMCOL               ; Same but player 2.
00002426  3A3C 01E0               2403             MOVE.W   #BOARD2X,D5
0000242A  3C3C 0078               2404             MOVE.W   #BOARDY,D6
0000242E                          2405             
0000242E  3039 000035D6           2406             MOVE.W (SCORE2),D0
00002434  48C0                    2407             EXT.L D0
00002436  E588                    2408             LSL.L #2,D0
00002438  2040                    2409             MOVE.L D0,A0
0000243A  2068 2448               2410             MOVE.L SCORVECT(A0),A0
0000243E  4E90                    2411             JSR (A0)
00002440                          2412             
00002440  301F                    2413             MOVE.W (A7)+,D0
00002442  4CDF 0160               2414             MOVEM.L (A7)+,D5-D6/A0
00002446  4E75                    2415             RTS
00002448                          2416  
00002448                          2417      ; Vector to jump to the number to be drawn.
00002448= 000024C8 0000250A ...   2418  SCORVECT   DC.L    ZERO,ONE,TWO,THREE,FOUR,FIVE,SIX,SEVEN
00002468                          2419  
00002468                          2420  
00002468                          2421  
00002468                          2422  NUMCOL
00002468  103C 0050               2423             MOVE.B #80,D0            ; Task pen color
0000246C  223C 003432CB           2424             MOVE.L #SCORECOL,D1      ; GRANATE
00002472  4E4F                    2425             TRAP #15
00002474                          2426             
00002474  103C 0051               2427             MOVE.B #81,D0            ; Task fill color
00002478  223C 003432CB           2428             MOVE.L #SCORECOL,D1       ; GRANATE
0000247E  4E4F                    2429             TRAP #15
00002480  4E75                    2430             RTS
00002482                          2431             
00002482                          2432  NUMBACKG
00002482  BA7C 0140               2433             CMP.W #SCRWIDTH/2,D5
00002486  6700 001C               2434             BEQ .NUMCOUNT
0000248A                          2435  
0000248A  103C 0050               2436             MOVE.B #80,D0            ; Task pen color
0000248E  223C 00AAAAAA           2437             MOVE.L #SCBOFCOL,D1      ; GRIS
00002494  4E4F                    2438             TRAP #15
00002496                          2439             
00002496  103C 0051               2440             MOVE.B #81,D0            ; Task fill color
0000249A  223C 00AAAAAA           2441             MOVE.L #SCBOFCOL,D1       ; GRIS
000024A0  4E4F                    2442             TRAP #15
000024A2  4E75                    2443             RTS
000024A4                          2444  .NUMCOUNT
000024A4  103C 0050               2445             MOVE.B #80,D0            ; Task pen color
000024A8  223C 00EBCE87           2446             MOVE.L #BACKGCOL,D1      ; GRIS
000024AE  4E4F                    2447             TRAP #15
000024B0                          2448             
000024B0  103C 0051               2449             MOVE.B #81,D0            ; Task fill color
000024B4  223C 00EBCE87           2450             MOVE.L #BACKGCOL,D1       ; GRIS
000024BA  4E4F                    2451             TRAP #15
000024BC  4E75                    2452             RTS
000024BE                          2453             
000024BE                          2454  SETCENTER
000024BE  3205                    2455             MOVE.W D5,D1             ;D5 CONTAINS THE X CENTER
000024C0  3406                    2456             MOVE.W D6,D2        ;D6 CONTAINS THE Y CENTER
000024C2  3601                    2457             MOVE.W D1,D3
000024C4  3802                    2458             MOVE.W D2,D4
000024C6  4E75                    2459             RTS
000024C8                          2460  
000024C8                          2461  ZERO
000024C8  48E7 F800               2462             MOVEM.L D0-D4,-(A7)
000024CC  103C 0057               2463             MOVE.B #87,D0
000024D0  4EB8 24BE               2464             JSR SETCENTER
000024D4  0441 0014               2465             SUB.W #20,D1
000024D8  0442 0019               2466             SUB.W #25,D2
000024DC  0643 0014               2467             ADD.W #20,D3
000024E0  0644 0019               2468             ADD.W #25,D4
000024E4  4E4F                    2469             TRAP #15
000024E6                          2470             
000024E6  4EB8 2482               2471             JSR NUMBACKG
000024EA                          2472             
000024EA  103C 0057               2473             MOVE.B #87,D0
000024EE                          2474             
000024EE  4EB8 24BE               2475             JSR SETCENTER
000024F2  0441 000A               2476             SUB.W #10,D1
000024F6  0442 000F               2477             SUB.W #15,D2
000024FA  0643 000A               2478             ADD.W #10,D3
000024FE  0644 000F               2479             ADD.W #15,D4
00002502  4E4F                    2480             TRAP #15
00002504                          2481             
00002504  4CDF 001F               2482             MOVEM.L (A7)+,D0-D4
00002508  4E75                    2483             RTS
0000250A                          2484  
0000250A                          2485  ONE
0000250A  48E7 F800               2486             MOVEM.L D0-D4,-(A7)
0000250E                          2487             
0000250E  103C 0057               2488             MOVE.B #87,D0
00002512  4EB8 24BE               2489             JSR SETCENTER
00002516  0441 000A               2490             SUB.W #10,D1
0000251A  0442 0019               2491             SUB.W #25,D2
0000251E                          2492             ;ADD.W #0,D3
0000251E  0444 000F               2493             SUB.W #15,D4
00002522  4E4F                    2494             TRAP #15
00002524                          2495             
00002524  4EB8 24BE               2496             JSR SETCENTER
00002528                          2497             ;ADD.W #0,D1
00002528  0442 0019               2498             SUB.W #25,D2
0000252C  0643 000A               2499             ADD.W #10,D3
00002530  0644 0019               2500             ADD.W #25,D4
00002534  4E4F                    2501             TRAP #15
00002536                          2502             
00002536  4CDF 001F               2503             MOVEM.L (A7)+,D0-D4
0000253A  4E75                    2504             RTS
0000253C                          2505  TWO
0000253C  48E7 F800               2506             MOVEM.L D0-D4,-(A7)
00002540                          2507  
00002540  103C 0057               2508             MOVE.B #87,D0
00002544  4EB8 24BE               2509             JSR SETCENTER
00002548  0441 0014               2510             SUB.W #20,D1
0000254C  0442 0019               2511             SUB.W #25,D2
00002550  0643 0014               2512             ADD.W #20,D3
00002554  0644 0019               2513             ADD.W #25,D4
00002558  4E4F                    2514             TRAP #15
0000255A                          2515             
0000255A  4EB8 2482               2516             JSR NUMBACKG
0000255E                          2517             
0000255E  103C 0057               2518             MOVE.B #87,D0
00002562  4EB8 24BE               2519             JSR SETCENTER
00002566  0441 0014               2520             SUB.W #20,D1
0000256A  0442 000F               2521             SUB.W #15,D2
0000256E  0643 000A               2522             ADD.W #10,D3
00002572  5B44                    2523             SUB.W #5,D4
00002574  4E4F                    2524             TRAP #15
00002576                          2525             
00002576  4EB8 24BE               2526             JSR SETCENTER
0000257A  0441 000A               2527             SUB.W #10,D1
0000257E  5A42                    2528             ADD.W #5,D2
00002580  0643 0014               2529             ADD.W #20,D3
00002584  0644 000F               2530             ADD.W #15,D4
00002588  4E4F                    2531             TRAP #15
0000258A                          2532             
0000258A  4CDF 001F               2533             MOVEM.L (A7)+,D0-D4
0000258E  4E75                    2534             RTS
00002590                          2535  THREE
00002590  48E7 F800               2536             MOVEM.L D0-D4,-(A7)
00002594                          2537             
00002594  103C 0057               2538             MOVE.B #87,D0
00002598  4EB8 24BE               2539             JSR SETCENTER
0000259C  0441 0014               2540             SUB.W #20,D1
000025A0  0442 0019               2541             SUB.W #25,D2
000025A4  0643 0014               2542             ADD.W #20,D3
000025A8  0644 0019               2543             ADD.W #25,D4
000025AC  4E4F                    2544             TRAP #15
000025AE                          2545             
000025AE  4EB8 2482               2546             JSR NUMBACKG
000025B2                          2547             
000025B2  103C 0057               2548             MOVE.B #87,D0
000025B6  4EB8 24BE               2549             JSR SETCENTER
000025BA  0441 0014               2550             SUB.W #20,D1
000025BE  0442 000F               2551             SUB.W #15,D2
000025C2  0643 000A               2552             ADD.W #10,D3
000025C6  5B44                    2553             SUB.W #5,D4
000025C8  4E4F                    2554             TRAP #15
000025CA                          2555             
000025CA  4EB8 24BE               2556             JSR SETCENTER
000025CE  0441 0014               2557             SUB.W #20,D1
000025D2  5A42                    2558             ADD.W #5,D2
000025D4  0643 000A               2559             ADD.W #10,D3
000025D8  0644 000F               2560             ADD.W #15,D4
000025DC  4E4F                    2561             TRAP #15
000025DE                          2562  
000025DE  4CDF 001F               2563             MOVEM.L (A7)+,D0-D4
000025E2  4E75                    2564             RTS
000025E4                          2565  FOUR
000025E4  48E7 F800               2566             MOVEM.L D0-D4,-(A7)
000025E8                          2567             
000025E8  103C 0057               2568             MOVE.B #87,D0
000025EC  4EB8 24BE               2569             JSR SETCENTER
000025F0  0441 0014               2570             SUB.W #20,D1
000025F4  0442 0019               2571             SUB.W #25,D2
000025F8  0643 0014               2572             ADD.W #20,D3
000025FC  0644 0019               2573             ADD.W #25,D4
00002600  4E4F                    2574             TRAP #15
00002602                          2575             
00002602  4EB8 2482               2576             JSR NUMBACKG
00002606  103C 0057               2577             MOVE.B #87,D0
0000260A  4EB8 24BE               2578             JSR SETCENTER
0000260E  0441 0014               2579             SUB.W #20,D1
00002612  5A42                    2580             ADD.W #5,D2
00002614  0643 000A               2581             ADD.W #10,D3
00002618  0644 0019               2582             ADD.W #25,D4
0000261C  4E4F                    2583             TRAP #15
0000261E                          2584             
0000261E  4EB8 24BE               2585             JSR SETCENTER
00002622  0441 000A               2586             SUB.W #10,D1
00002626  0442 0019               2587             SUB.W #25,D2
0000262A  0643 000A               2588             ADD.W #10,D3
0000262E  5B44                    2589             SUB.W #5,D4
00002630  4E4F                    2590             TRAP #15
00002632                          2591             
00002632  4CDF 001F               2592             MOVEM.L (A7)+,D0-D4
00002636  4E75                    2593             RTS
00002638                          2594  FIVE
00002638  48E7 F800               2595             MOVEM.L D0-D4,-(A7)
0000263C                          2596             
0000263C  103C 0057               2597             MOVE.B #87,D0
00002640  4EB8 24BE               2598             JSR SETCENTER
00002644  0441 0014               2599             SUB.W #20,D1
00002648  0442 0019               2600             SUB.W #25,D2
0000264C  0643 0014               2601             ADD.W #20,D3
00002650  0644 0019               2602             ADD.W #25,D4
00002654  4E4F                    2603             TRAP #15
00002656                          2604             
00002656  4EB8 2482               2605             JSR NUMBACKG
0000265A                          2606             
0000265A  103C 0057               2607             MOVE.B #87,D0
0000265E  4EB8 24BE               2608             JSR SETCENTER
00002662  0441 000A               2609             SUB.W #10,D1
00002666  0442 000F               2610             SUB.W #15,D2
0000266A  0643 0014               2611             ADD.W #20,D3
0000266E  5B44                    2612             SUB.W #5,D4
00002670  4E4F                    2613             TRAP #15
00002672                          2614             
00002672  4EB8 24BE               2615             JSR SETCENTER
00002676  0441 0014               2616             SUB.W #20,D1
0000267A  5A42                    2617             ADD.W #5,D2
0000267C  0643 000A               2618             ADD.W #10,D3
00002680  0644 000F               2619             ADD.W #15,D4
00002684  4E4F                    2620             TRAP #15
00002686                          2621  
00002686  4CDF 001F               2622             MOVEM.L (A7)+,D0-D4
0000268A  4E75                    2623             RTS
0000268C                          2624  SIX
0000268C  48E7 F800               2625             MOVEM.L D0-D4,-(A7)
00002690  103C 0057               2626             MOVE.B #87,D0
00002694  4EB8 24BE               2627             JSR SETCENTER
00002698  0441 0014               2628             SUB.W #20,D1
0000269C  0442 0019               2629             SUB.W #25,D2
000026A0  0643 0014               2630             ADD.W #20,D3
000026A4  0644 0019               2631             ADD.W #25,D4
000026A8  4E4F                    2632             TRAP #15
000026AA                          2633             
000026AA  4EB8 2482               2634             JSR NUMBACKG
000026AE                          2635             
000026AE  103C 0057               2636             MOVE.B #87,D0
000026B2  4EB8 24BE               2637             JSR SETCENTER
000026B6  0441 000A               2638             SUB.W #10,D1
000026BA  0442 000F               2639             SUB.W #15,D2
000026BE  0643 0014               2640             ADD.W #20,D3
000026C2  5B44                    2641             SUB.W #5,D4
000026C4  4E4F                    2642             TRAP #15
000026C6                          2643             
000026C6  4EB8 24BE               2644             JSR SETCENTER
000026CA  0441 000A               2645             SUB.W #10,D1
000026CE  5A42                    2646             ADD.W #5,D2
000026D0  0643 000A               2647             ADD.W #10,D3
000026D4  0644 000F               2648             ADD.W #15,D4
000026D8  4E4F                    2649             TRAP #15
000026DA                          2650  
000026DA  4CDF 001F               2651             MOVEM.L (A7)+,D0-D4
000026DE  4E75                    2652             RTS
000026E0                          2653  SEVEN
000026E0  48E7 F800               2654             MOVEM.L D0-D4,-(A7)
000026E4                          2655             
000026E4  103C 0057               2656             MOVE.B #87,D0
000026E8  4EB8 24BE               2657             JSR SETCENTER
000026EC  0441 0014               2658             SUB.W #20,D1
000026F0  0442 0019               2659             SUB.W #25,D2
000026F4  0643 0014               2660             ADD.W #20,D3
000026F8  0444 000F               2661             SUB.W #15,D4
000026FC  4E4F                    2662             TRAP #15
000026FE                          2663             
000026FE  103C 0057               2664             MOVE.B #87,D0
00002702  4EB8 24BE               2665             JSR SETCENTER
00002706  0641 000A               2666             ADD.W #10,D1
0000270A  0442 000F               2667             SUB.W #15,D2
0000270E  0643 0014               2668             ADD.W #20,D3
00002712  5B44                    2669             SUB.W #5,D4
00002714  4E4F                    2670             TRAP #15
00002716                          2671             
00002716  4EB8 24BE               2672             JSR SETCENTER
0000271A  5B42                    2673             SUB.W #5,D2
0000271C  0643 000A               2674             ADD.W #10,D3
00002720  5A44                    2675             ADD.W #5,D4
00002722  4E4F                    2676             TRAP #15
00002724                          2677  
00002724  4EB8 24BE               2678             JSR SETCENTER
00002728  0441 000A               2679             SUB.W #10,D1
0000272C  5A42                    2680             ADD.W #5,D2
0000272E  0644 000F               2681             ADD.W #15,D4
00002732  4E4F                    2682             TRAP #15
00002734                          2683             
00002734  4EB8 24BE               2684             JSR SETCENTER
00002738  0441 0014               2685             SUB.W #20,D1
0000273C  0642 000F               2686             ADD.W #15,D2
00002740  0443 000A               2687             SUB.W #10,D3
00002744  0644 0019               2688             ADD.W #25,D4
00002748  4E4F                    2689             TRAP #15
0000274A                          2690             
0000274A  4CDF 001F               2691             MOVEM.L (A7)+,D0-D4
0000274E  4E75                    2692             RTS
00002750                          2693  
00002750                          2694  
00002750                          2695  
00002750                          2696  NADA
00002750  4EB8 2482               2697             JSR NUMBACKG
00002754  4EB8 24BE               2698             JSR SETCENTER
00002758  103C 0057               2699             MOVE.B #87,D0
0000275C  0441 0014               2700             SUB.W #20,D1
00002760  0442 0019               2701             SUB.W #25,D2
00002764  0643 0014               2702             ADD.W #20,D3
00002768  0644 0019               2703             ADD.W #25,D4
0000276C  4E4F                    2704             TRAP #15
0000276E  4E75                    2705             RTS
00002770                          2706             
00002770                          2707  INTROCOL
00002770                          2708  
00002770  103C 0050               2709             MOVE.B #80,D0            ; Task pen color
00002774  7200                    2710             MOVE.L #INTBGCOL,D1      ; GRANATE
00002776  4E4F                    2711             TRAP #15
00002778                          2712  
00002778  103C 0051               2713             MOVE.B #81,D0            ; Task fill color
0000277C  7200                    2714             MOVE.L #INTBGCOL,D1       ; GRANATE
0000277E  4E4F                    2715             TRAP #15
00002780  4E75                    2716             RTS
00002782                          2717             
00002782                          2718  
00002782                          2719  
00002782                          2720  
00002782                          2721  
00002782                          2722  
00002782                          2723  
00002782                          2724  
00002782                          2725  
00002782                          2726  
00002782                          2727  
00002782                          2728  
00002782                          2729  
00002782                          2730  -------------------- end include --------------------
00002782                          2731              INCLUDE "AUDIO.X68"             ; AUDIO
00002782                          2732  ; =============================================================================
00002782                          2733  ; TITLE    : AUDIO 
00002782                          2734  ; AUTHOR   : ODILO FORTES & MARIBEL CRESPI
00002782                          2735  ; HISTORY  : 
00002782                          2736  ;-------------------------------------------------------------------------------
00002782                          2737  
00002782                          2738          
00002782                          2739          
00002782                          2740  ; -----------------------------------------------------------------------------
00002782                          2741  LOADMUSI
00002782                          2742  ; LOADS ALL SOUND FILES ON MEMORY
00002782                          2743  ; INPUT     - NONE
00002782                          2744  ; OUTPUT    - NONE
00002782                          2745  ; MODIFIES  - NONE
00002782                          2746  ; -----------------------------------------------------------------------------
00002782                          2747              ;Guardar registros
00002782  48E7 E040               2748              MOVEM.L     D0-D2/A1,-(A7)
00002786                          2749              
00002786  0C79 0001 000035EC      2750              CMP #1,(MSCCHSD) 
0000278E  6700 0020               2751              BEQ .PLAYM2         ; BRANCH IF THE PLAYER WANTS TO LISTEN SAMBA
00002792  0C79 0000 000035EC      2752              CMP #0,(MSCCHSD)
0000279A  6700 001C               2753              BEQ .PLAYM1         ; BRANCH IF THE PLAYER WANTS TO LISTEN OBA OBA
0000279E  43F9 000027DE           2754              LEA.L .MUSIC3,A1
000027A4                          2755  .DOIT                            
000027A4  303C 0046               2756              MOVE.W       #70,D0              ; Task for sound
000027A8                          2757              
000027A8  4E4F                    2758              TRAP        #15                  ; Trap
000027AA                          2759              ;Restaurar registros
000027AA  4CDF 0207               2760              MOVEM.L     (A7)+,D0-D2/A1
000027AE  4E75                    2761              RTS
000027B0                          2762              
000027B0                          2763  .PLAYM2
000027B0  43F9 000027CE           2764              LEA.L .MUSIC2,A1 ; SAMBA 
000027B6  60EC                    2765              BRA .DOIT
000027B8                          2766  .PLAYM1
000027B8  43F9 000027C0           2767              LEA.L .MUSIC1,A1 ; OBA OBA
000027BE  60E4                    2768              BRA .DOIT
000027C0                          2769  
000027C0                          2770  ; RUTAS DE ARCHIVOS -----------------------------------------------------------
000027C0                          2771  
000027C0= 4D 45 44 49 41 2F ...   2772  .MUSIC1      DC.B    'MEDIA/OBA.wav',0
000027CE= 4D 45 44 49 41 2F ...   2773  .MUSIC2      DC.B    'MEDIA/Samba.wav',0
000027DE= 4D 45 44 49 41 2F ...   2774  .MUSIC3      DC.B    'MEDIA/LAST.wav',0
000027EE                          2775               DS.W    0
000027EE                          2776               
000027EE= 000027C0 000027CE       2777  .LOADSONG    DC.L    .MUSIC1,.MUSIC2             
000027F6                          2778                  
000027F6                          2779  
000027F6                          2780  ; -----------------------------------------------------------------------------
000027F6                          2781  PLAYMUSI
000027F6                          2782  ; PLAYS SOUNDS DURING GAME PLAY
000027F6                          2783  ; INPUT     - NONE
000027F6                          2784  ; OUTPUT    - NONE
000027F6                          2785  ; MODIFIES  - NONE
000027F6                          2786  ; -----------------------------------------------------------------------------
000027F6  48E7 8000               2787              MOVEM.L D0,-(A7)
000027FA                          2788              
000027FA  103C 0047               2789              MOVE.B #71,D0
000027FE  4E4F                    2790              TRAP #15
00002800                          2791              
00002800  4CDF 0001               2792              MOVEM.L (A7)+,D0
00002804  4E75                    2793              RTS
00002806                          2794  
00002806                          2795  ; -----------------------------------------------------------------------------
00002806                          2796  STPSOUND
00002806                          2797  ; STOPS ALL THE SONGS
00002806                          2798  ; INPUT     - NONE
00002806                          2799  ; OUTPUT    - NONE
00002806                          2800  ; MODIFIES  - NONE
00002806                          2801  ; -----------------------------------------------------------------------------
00002806                          2802          
00002806                          2803          
00002806  303C 004C               2804          MOVE.W #76,D0
0000280A  7403                    2805          MOVE.L #3,D2
0000280C  4E4F                    2806          TRAP #15
0000280E  4E75                    2807          RTS
00002810                          2808          
00002810                          2809        
00002810                          2810  
00002810                          2811  
00002810                          2812  
00002810                          2813  
00002810                          2814  
00002810                          2815  
00002810                          2816  
00002810                          2817  
00002810                          2818  
00002810                          2819  
00002810                          2820  
00002810                          2821  
00002810                          2822  
00002810                          2823  
00002810                          2824  
00002810                          2825  
00002810                          2826  
00002810                          2827  
00002810                          2828  
00002810                          2829  
00002810                          2830  
00002810                          2831  -------------------- end include --------------------
00002810                          2832              INCLUDE "COUNTDOWN.X68"         ; CUENTA ATRAS
00002810                          2833  
00002810                          2834  
00002810                          2835  
00002810                          2836  ; -----------------------------------------------------------------------------
00002810                          2837  COUNTINIT
00002810                          2838  ; INITS THE BALL
00002810                          2839  ; INPUT    - NONE
00002810                          2840  ; OUTPUT   - NONE
00002810                          2841  ; MODIFIES - NONE
00002810                          2842  ; -----------------------------------------------------------------------------
00002810  3A3C 0140               2843              MOVE.W #SCRWIDTH/2,D5
00002814  3C3C 00A0               2844              MOVE.W #SCRHEIGH/3,D6
00002818                          2845              
00002818  33FC 0004 000035E4      2846              MOVE.W #4,(PRINTN)
00002820  4E75                    2847              RTS
00002822                          2848  
00002822                          2849  ; -----------------------------------------------------------------------------
00002822                          2850  COUNTUPD
00002822                          2851  ; UPDATES THE BALL
00002822                          2852  ; INPUT    - NONE
00002822                          2853  ; OUTPUT   - NONE
00002822                          2854  ; MODIFIES - NONE
00002822                          2855  ; -----------------------------------------------------------------------------
00002822  1039 0000293B           2856              MOVE.B (SCRCYCCT),D0
00002828  C07C 000F               2857              AND.W #%00001111,D0
0000282C  B03C 0000               2858              CMP.B  #0,D0
00002830  6600 0008               2859              BNE .END
00002834                          2860              
00002834  5379 000035E4           2861              SUBQ.W #1,(PRINTN)
0000283A                          2862              
0000283A                          2863  .END
0000283A  4E75                    2864              RTS
0000283C                          2865  
0000283C                          2866  ; -----------------------------------------------------------------------------
0000283C                          2867  COUNTPLOT
0000283C                          2868  ; PLOTS THE BALL
0000283C                          2869  ; INPUT    - NONE
0000283C                          2870  ; OUTPUT   - NONE
0000283C                          2871  ; MODIFIES - NONE
0000283C                          2872  ;-----------------------------------------------------------------------------
0000283C                          2873  
0000283C  0C79 0003 000035E4      2874              CMP #3,(PRINTN)
00002844  6700 002A               2875              BEQ .PRINT3
00002848                          2876              
00002848  0C79 0002 000035E4      2877              CMP #2,(PRINTN)
00002850  6700 0026               2878              BEQ .PRINT2
00002854                          2879              
00002854  0C79 0001 000035E4      2880              CMP #1,(PRINTN)
0000285C  6700 0022               2881              BEQ .PRINT1
00002860                          2882              
00002860  0C79 0000 000035E4      2883              CMP #0,(PRINTN)
00002868  6700 001E               2884              BEQ .READY
0000286C                          2885  
0000286C  6000 0022               2886              BRA NOTHING
00002870                          2887              
00002870                          2888  .PRINT3
00002870  4EB8 2590               2889              JSR THREE
00002874  6000 001A               2890              BRA NOTHING
00002878                          2891              
00002878                          2892  .PRINT2
00002878  4EB8 253C               2893              JSR TWO
0000287C  6000 0012               2894              BRA NOTHING
00002880                          2895              
00002880                          2896  .PRINT1
00002880  4EB8 250A               2897              JSR ONE
00002884  6000 000A               2898              BRA NOTHING
00002888                          2899  
00002888                          2900  .READY
00002888  33FC 0001 000035E8      2901              MOVE.W #STAGAME,(STANEXT)
00002890                          2902              
00002890                          2903  NOTHING
00002890  4E75                    2904              RTS
00002892                          2905  
00002892                          2906  
00002892                          2907  
00002892                          2908  
00002892                          2909  
00002892                          2910  
00002892                          2911  
00002892                          2912  
00002892                          2913  
00002892                          2914  
00002892                          2915  
00002892                          2916  
00002892                          2917  
00002892                          2918  
00002892                          2919  
00002892                          2920  
00002892                          2921  
00002892                          2922  
00002892                          2923  
00002892                          2924  
00002892                          2925  
00002892                          2926  
00002892                          2927  
00002892                          2928  
00002892                          2929  
00002892                          2930  
00002892                          2931  
00002892                          2932  
00002892                          2933  
00002892                          2934  -------------------- end include --------------------
00002892                          2935              INCLUDE "FILES.X68"             ; TXT
00002892                          2936  
00002892                          2937  
00002892                          2938  ; -----------------------------------------------------------------------------
00002892                          2939  FILWRITE
00002892                          2940  ; INPUT     - NONE
00002892                          2941  ; OUTPUT    - NONE
00002892                          2942  ; MODIFIES  - NONE
00002892                          2943  ; -----------------------------------------------------------------------------
00002892                          2944  ;------------------------------------------------------------------------------
00002892                          2945          
00002892  48E7 E040               2946          MOVEM.L  D0-D2/A1,-(A7) ; SAVE REGISTERS
00002896  33FC 0001 000028F6      2947          MOVE.W #IAXEXTRA,(SPEEDFIL)
0000289E                          2948  ;------------------          CLOSE FILES         -----------------------------
0000289E  303C 0032               2949          MOVE.W  #50,D0                  ; TASK TO CLOSE ALL FILES
000028A2  4E4F                    2950          TRAP    #15       
000028A4                          2951  ;-----------------           OPEN FILE        ---------------------------------
000028A4  43F9 000028FE           2952          LEA.L   DIRFILE,A1          ; EN A1 METEMOS LA DIRECCION DEL FICHERO
000028AA  303C 0033               2953          MOVE.W   #51,D0             ; TASK TO OPEN THE FILE  
000028AE  4E4F                    2954          TRAP    #15     
000028B0                          2955  
000028B0                          2956  ;------------------          WRITE FILE     -----------------------------------      
000028B0                          2957          ;PREPARAR TRAP 54
000028B0  43F9 000028F6           2958          LEA.L   SPEEDFIL,A1
000028B6  243C 00000004           2959          MOVE.L  #SIZEINT,D2             ; TAMAO DE UN INT
000028BC  7036                    2960          MOVEQ   #54,D0                  ; ESCRIBIR NUEVA PARTIDA EN EL FICHERO 
000028BE  4E4F                    2961          TRAP    #15
000028C0                          2962  ;-----------------         CLOSE FILES        --------------------------------        
000028C0  303C 0032               2963          MOVE.W   #50,D0
000028C4  4E4F                    2964          TRAP    #15     
000028C6  4CDF 0207               2965          MOVEM.L  (A7)+,A1/D0-D2
000028CA  4E75                    2966          RTS  
000028CC                          2967          
000028CC                          2968          
000028CC                          2969  ; -----------------------------------------------------------------------------
000028CC                          2970  FILREAD
000028CC                          2971  ; INPUT     - NONE
000028CC                          2972  ; OUTPUT    - NONE
000028CC                          2973  ; MODIFIES  - NONE
000028CC                          2974  ; -----------------------------------------------------------------------------
000028CC                          2975  
000028CC  48E7 E040               2976          MOVEM.L  D0-D2/A1,-(A7) ; SAVE REGISTERS
000028D0                          2977  ;------------------          CLOSE FILES         -----------------------------
000028D0  303C 0032               2978          MOVE.W  #50,D0                  ; TASK TO CLOSE ALL FILES
000028D4  4E4F                    2979          TRAP    #15       
000028D6                          2980  ;-----------------           OPEN FILE        ---------------------------------
000028D6  43F9 000028FE           2981          LEA.L   DIRFILE,A1           ; EN A1 METEMOS LA DIRECCION DEL FICHERO     
000028DC  7033                    2982          MOVEQ   #51,D0               ; TASK TO OPEN THE FILE  
000028DE  4E4F                    2983          TRAP    #15
000028E0                          2984  ;----------------            READ FILE      -----------------------------------
000028E0                          2985          ;READ THE LAST SCORE
000028E0  7404                    2986          MOVEQ.L #SIZEINT,D2          ; NUMERO DE BYTES A LEER
000028E2  7035                    2987          MOVEQ   #53,D0                ; TAREA PARA LEER UN FICHERO
000028E4  43F9 000028FA           2988          LEA.L   SPEEDIA,A1           ; EL BUFFER DE DATOS SER PLRGAMES
000028EA  4E4F                    2989          TRAP    #15
000028EC                          2990  ;-----------------         CLOSE FILES        --------------------------------
000028EC  7032                    2991          MOVEQ   #50,D0
000028EE  4E4F                    2992          TRAP    #15     
000028F0  4CDF 0207               2993          MOVEM.L  (A7)+,A1/D0-D2
000028F4  4E75                    2994          RTS  
000028F6                          2995          
000028F6                          2996  ; --- VARIABLES Y CONSTANTES DE FICHERO ---------------------------------------
000028F6  =00000004               2997  SIZEINT    EQU     4                     ; tamao de un entero (dato a salvar)
000028F6                          2998  SPEEDFIL   DS.L    1                      ; BUFFER FOR DATA READ FROM FILE
000028FA                          2999  SPEEDIA    DS.L    1                      ; PLAYER GAMES BUFFER DE LECTURA
000028FE= 46 49 4C 45 53 2F ...   3000  DIRFILE    DC.B    'FILES/SPEEDIA.txt',0 ; path a fichero donde salvar score
00002910                          3001             DS.W    0
00002910                          3002  
00002910                          3003  
00002910                          3004  
00002910                          3005  
00002910                          3006  
00002910                          3007  
00002910                          3008  
00002910                          3009  
00002910                          3010  
00002910                          3011  
00002910                          3012  -------------------- end include --------------------
00002910                          3013              
00002910                          3014              
00002910                          3015              
00002910                          3016              
00002910                          3017  
00002910                          3018  ; --- INITIALIZE --------------------------------------------------------------
00002910                          3019  
00002910  4EB8 1000               3020  START       JSR     SYSINIT                 ; INITIALIZE SYSTEM-RELATED STUFF
00002914                          3021  
00002914  4EB8 11D6               3022              JSR     STAINIT                 ; INICIAMOS EL ESTADO DEL JUEGO
00002918                          3023  
00002918                          3024  
00002918                          3025  ; --- UPDATE ------------------------------------------------------------------
00002918                          3026  
00002918  4E40                    3027  .LOOP       TRAP    #KBDTRAP                ; READ KEYBOARD
0000291A                          3028  
0000291A  4EB8 11E8               3029              JSR     STAUPD                  ; ACTUALIZAMOS LA LOGICA DEL JUEGO
0000291E                          3030  
0000291E                          3031  ; --- WAIT SYNCH --------------------------------------------------------------
0000291E                          3032  
0000291E  4A39 0000293A           3033  .WINT       TST.B   (SCRINTCT)              ; WAIT FOR INTERRUPT
00002924  67F8                    3034              BEQ     .WINT
00002926  4239 0000293A           3035              CLR.B   (SCRINTCT)
0000292C                          3036  
0000292C                          3037  ; --- PLOT --------------------------------------------------------------------
0000292C                          3038  
0000292C  4EB8 124E               3039              JSR     STAPLOT                 ; ACTUALIZAMOS LOS GRAFICOS
00002930                          3040  
00002930  4E41                    3041              TRAP    #SCRTRAP                ; SHOW GRAPHICS
00002932  60E4                    3042              BRA     .LOOP                   ; MAIN LOOP
00002934  FFFF FFFF               3043              SIMHALT
00002938                          3044  
00002938                          3045  ; --- VARIABLES ---------------------------------------------------------------
00002938                          3046  
00002938                          3047              INCLUDE "SYSVAR.X68"
00002938                          3048  ; =============================================================================
00002938                          3049  ; TITLE    : SYSTEM VARIABLES
00002938                          3050  ; AUTHOR   : ANTONI BURGUERA
00002938                          3051  ; COMMENTS : NOTE THAT ALL THESE VARS ARE USED TO SHARE DATA FROM SYSTEM TO
00002938                          3052  ;            USER. THUS THEY MUST NOT BE IN PROTECTED MEMORY.
00002938                          3053  ;            NOTE THAT USING DMMDATA IN SUCH WAY IS A BAD IDEA, AS USER
00002938                          3054  ;            APPLICATIONS CAN ALSO FREE OR CHANGE OWNERSHIP. NONETHELESS, FOR
00002938                          3055  ;            THE SAKE OF THIS EXAMPLE THIS IS GOOD ENOUGH.
00002938                          3056  ; HISTORY  : XX-XXX-201X - CREATION
00002938                          3057  ;            11-OCT-2020 - MINOR CHANGES
00002938                          3058  ; =============================================================================
00002938                          3059  
00002938                          3060  ; --- KEYBOARD RELATED VARIABLES ----------------------------------------------
00002938                          3061  
00002938                          3062  KBDVAL      DS.B    1                       ; KEY PRESSED=1
00002939                          3063  KBDEDGE     DS.B    1                       ; KEY CHANGED=1
0000293A                          3064  
0000293A                          3065              DS.W    0
0000293A                          3066  
0000293A                          3067  ; --- SCREEN RELATED VARIABLES ------------------------------------------------
0000293A                          3068  
0000293A                          3069  SCRINTCT    DS.B    1                       ; INTERRUPT COUNTER/FLAG
0000293B                          3070  SCRCYCCT    DS.B    1                       ; CYCLE COUNTER
0000293C                          3071              DS.W    0
0000293C                          3072  
0000293C                          3073  ; --- DYNAMIC MEMORY VARIABLES ------------------------------------------------
0000293C                          3074  
00002940                          3075              ORG     (*+DMMBSIZE-1)&-DMMBSIZE ; ALIGN TO DMMBSIZE
00002940                          3076  DMMDATA     DS.B    DMMBSIZE*DMMBNUM        ; DYNAMIC MEMORY ALLOCATION SPACE
000035C0                          3077              DS.W    0                       ; JUST IN CASE (SIZE IS POW OF TWO)
000035C0                          3078  -------------------- end include --------------------
000035C0                          3079              INCLUDE "VAR.X68"
000035C0                          3080  ; =============================================================================
000035C0                          3081  ; TITLE    : GAME VARIABLES
000035C0                          3082  ; AUTHOR   : ODILO FORTES & MARIBEL CRESPI
000035C0                          3083  ; HISTORY  :
000035C0                          3084  ; =============================================================================
000035C0                          3085  
000035C0                          3086  ; --- PLAYER RELATED VARIABLES ------------------------------------------------
000035C0                          3087  
000035C0                          3088  ; --- PLAYER 1 ---
000035C0                          3089  
000035C0                          3090  PLAYER1X    DS.W    1       ; PLAYER 1 X COORDINATE
000035C2                          3091  PLAYER1Y    DS.W    1       ; PLAYER 1 Y COORDINATE
000035C4                          3092  
000035C4                          3093  PLR1XSPD    DS.W    1       ; PLAYER 1 X SPEED
000035C6                          3094  
000035C6                          3095  PLR1XACC    DS.W    1       ; PLAYER 1 X ACCELERATION
000035C8                          3096  PLR1YACC    DS.W    1       ; PLAYER 1 Y ACCELERATION
000035CA                          3097  
000035CA                          3098  SCORE1      DS.W    1       ; PLAYER 1 SCORE
000035CC                          3099  
000035CC                          3100  ; --- PLAYER 2 ---
000035CC                          3101  
000035CC                          3102  PLAYER2X    DS.W    1       ; PLAYER 2 X COORDINATE
000035CE                          3103  PLAYER2Y    DS.W    1       ; PLAYER 2 Y COORDINATE
000035D0                          3104  
000035D0                          3105  PLR2XSPD    DS.W    1       ; PLAYER 2 X SPEED
000035D2                          3106  
000035D2                          3107  PLR2XACC    DS.W    1       ; PLAYER 2 X ACCELERATION
000035D4                          3108  PLR2YACC    DS.W    1       ; PLAYER 2 Y ACCELERATION
000035D6                          3109  
000035D6                          3110  SCORE2      DS.W    1       ; PLAYER 2 SCORE
000035D8                          3111  
000035D8                          3112  ; --- BALL RELATED VARIABLES --------------------------------------------------
000035D8                          3113  
000035D8                          3114  BALLX       DS.W    1
000035DA                          3115  BALLY       DS.W    1
000035DC                          3116  
000035DC                          3117  BALLXSPD    DS.W    1
000035DE                          3118  BALLYSPD    DS.W    1
000035E0                          3119  
000035E0                          3120  ; --- MAP RELATED VARIABLES ---------------------------------------------------
000035E0                          3121  
000035E0                          3122  WARNING1    DS.W    1       ; COUNTER TO KNOW IF TEAM 1 (OR 2) FIELD HAS BEEN
000035E2                          3123  WARNING2    DS.W    1       ; ALREADY TOUCHED BY THE BALL. ZERO OR NON ZERO.
000035E4                          3124  
000035E4                          3125  ; --- MATCH START COUNTDOWN RELATED VARIABLES ---------------------------------
000035E4                          3126  
000035E4                          3127  PRINTN      DS.W    1
000035E6                          3128  
000035E6                          3129  ; --- STATE MANAGEMENT VARIABLES  ------------------------------------------------
000035E6                          3130  
000035E6                          3131  STACUR      DS.W    1   ; CURRENT STATE
000035E8                          3132  STANEXT     DS.W    1   ; NEXT STATE
000035EA                          3133  
000035EA                          3134  OPTCHSD     DS.W    1   ; WHAT OPTION DID THE PLAYER CHOSE
000035EC                          3135  MSCCHSD     DS.W    1   ; WHAT MUSIC CHOSE THE PLAYER
000035EE                          3136  
000035EE                          3137  ATRBAR      DS.W    1   ; IF IT FULLY LOADS, THEN WE ENTER ATTRACT MODE.
000035F0                          3138                          ; THE BAR RESETS WITH EVERY PRESSED KEY.
000035F0                          3139  
000035F0                          3140  
000035F0                          3141  
000035F0                          3142  
000035F0                          3143  
000035F0                          3144  
000035F0                          3145  
000035F0                          3146  
000035F0                          3147  
000035F0                          3148  
000035F0                          3149  
000035F0                          3150  
000035F0                          3151  
000035F0                          3152  
000035F0                          3153  
000035F0                          3154  -------------------- end include --------------------
000035F0                          3155              END    START

No errors detected
No warnings generated


SYMBOL TABLE INFORMATION
Symbol-name         Value
-------------------------
ATRBAR              35EE
ATRMODE             3
BACKGCOL            EBCE87
BALLFCOL            FFFF
BALLFRX             1
BALLFRY             3
BALLINIT            202C
BALLINIT:MOVEXSPD   205C
BALLPCOL            0
BALLPLOT            23A8
BALLRAD             A
BALLUPD             2064
BALLUPD:XNEG        2088
BALLUPD:XPOS        2070
BALLUPD:XSIGN       2064
BALLUPD:YNEG        20C0
BALLUPD:YPOS        20A8
BALLUPD:YSIGN       209C
BALLX               35D8
BALLXSPD            35DC
BALLXTOP            1E
BALLY               35DA
BALLYSPD            35DE
BALLYTOP            1E
BARCOL              FF
BAREMPTY            0
BARHEIGH            A
BARWIDTH            190
BARY                190
BASEXSPD            7
BOARD1X             A0
BOARD2X             1E0
BOARDY              78
BOUNDMAR            2
CHSMUSIC            2
COUNTINIT           2810
COUNTPLOT           283C
COUNTPLOT:PRINT1    2880
COUNTPLOT:PRINT2    2878
COUNTPLOT:PRINT3    2870
COUNTPLOT:READY     2888
COUNTUPD            2822
COUNTUPD:END        283A
DINHO1              0
DINHO2              1
DIRFILE             28FE
DMMALLOC            11A6
DMMALLOC:END        11BE
DMMBNUM             32
DMMBSIZE            40
DMMDATA             2940
DMMFCOM             1180
DMMFFND             118E
DMMFIRST            1136
DMMFLOOP            1174
DMMFRCOM            1148
DMMFREE             11C0
DMMFRFND            1156
DMMFRLOP            113C
DMMFRSTO            116E
DMMINIT             1114
DMMINIT:LOOP        1122
DMMNEXT             1158
DMMNEXTO            1190
DMMSYSID            0
DRAWSC1             23EC
DRAWSC2             241A
ENDPLR1             2258
ENDPLR1:BOTZONE     2296
ENDPLR1:LEFTZONE    2260
ENDPLR1:PLAYER2     2258
ENDPLR1:RGHTZONE    226E
ENDPLR1:TOPZONE     227E
ENDPLR2             22DA
ENDPLR2:ENDMOVE     2372
ENDPLR2:LATERAL     22DA
ENDPLR2:LBOUND      2364
ENDPLR2:LSEP        2340
ENDPLR2:RBOUND      2352
ENDPLR2:RSEP        232E
FILREAD             28CC
FILWRITE            2892
FIVE                2638
FOUR                25E4
FRICXSPD            2398
FRICYSPD            23A0
GRASFCOL            4CB122
GRASHEIG            1E
GRASPCOL            497700
IAXEXTRA            1
INTBGCOL            0
INTROCOL            2770
KBDBITDN            3
KBDBITF1            4
KBDBITF2            5
KBDBITF3            6
KBDBITLF            0
KBDBITPS            7
KBDBITRT            2
KBDBITUP            1
KBDCHRDN            28
KBDCHRLF            25
KBDCHRMK            44
KBDCHRPK            20
KBDCHRRT            27
KBDCHRSH            41
KBDCHRSP            57
KBDCHRUP            26
KBDDOWN             28
KBDEDGE             2939
KBDFIRE1            57
KBDFIRE2            44
KBDFIRE3            41
KBDINIT             10B4
KBDLEFT             25
KBDMSKDN            8
KBDMSKF1            10
KBDMSKF2            20
KBDMSKF3            40
KBDMSKLF            1
KBDMSKPS            80
KBDMSKRT            4
KBDMSKUP            2
KBDPAUSE            20
KBDREAD             10CA
KBDREAD:LOOP        110A
KBDREAD:STORE       1106
KBDRIGHT            27
KBDTRAP             0
KBDUP               26
KBDVAL              2938
LINECOL             FFFFFF
LINEWIDT            8
LOADMUSI            2782
LOADMUSI:DOIT       27A4
LOADMUSI:LOADSONG   27EE
LOADMUSI:MUSIC1     27C0
LOADMUSI:MUSIC2     27CE
LOADMUSI:MUSIC3     27DE
LOADMUSI:PLAYM1     27B8
LOADMUSI:PLAYM2     27B0
MAPINIT             1B52
MAPPLOT             1B88
MAPPLOT:DRAWWARN    1CE4
MAPPLOT:ENDPLOT     1D38
MAPPLOT:NOWARN1     1CCA
MAPPLOT:RED         1CFE
MAPPLOT:SET         1D66
MAPPLOT:WARN1       1D60
MAPPLOT:WARN2       1D56
MAPPLOT:WARNCOL     1D3E
MAPUPD              1B60
MAPUPD:END          1B86
MAPUPD:NEXT1        1B74
MAXSCORE            7
MSCCHSD             35EC
MUSICPKM            2
NADA                2750
NEGXSPD             2374
NEGYSPD             2386
NOTHING             2890
NUMBACKG            2482
NUMBACKG:NUMCOUNT   24A4
NUMCOL              2468
ONE                 250A
OPTCHSD             35EA
PLAYER1X            35C0
PLAYER1Y            35C2
PLAYER2X            35CC
PLAYER2Y            35CE
PLAYMUSI            27F6
PLR1FCOL            FF00
PLR1INIT            1D74
PLR1PCOL            0
PLR1PLOT            1E8C
PLR1UPD             1D8C
PLR1UPD:CHCKMODE    1DBE
PLR1UPD:DOL         1E4E
PLR1UPD:DOR         1E78
PLR1UPD:IA          1E02
PLR1UPD:KEYS1       1DDC
PLR1UPD:KEYS2       1DEE
PLR1UPD:KEYS3       1E00
PLR1UPD:MOVEL       1E38
PLR1UPD:MOVER       1E62
PLR1UPD:MOVEUP      1E22
PLR1UPD:PLAYER      1DCA
PLR1UPD:RTS         1E8A
PLR1XACC            35C6
PLR1XSPD            35C4
PLR1YACC            35C8
PLR2FCOL            BBBB00
PLR2INIT            1ED0
PLR2PCOL            0
PLR2PLOT            1FE8
PLR2UPD             1EE8
PLR2UPD:CHCKMODE    1F1A
PLR2UPD:DOL         1FAA
PLR2UPD:DOR         1FD4
PLR2UPD:IA          1F5E
PLR2UPD:KEYS1       1F38
PLR2UPD:KEYS2       1F4A
PLR2UPD:KEYS3       1F5C
PLR2UPD:MOVEL       1F94
PLR2UPD:MOVER       1FBE
PLR2UPD:MOVEUP      1F7E
PLR2UPD:PLAYER      1F26
PLR2UPD:RTS         1FE6
PLR2XACC            35D2
PLR2XSPD            35D0
PLR2YACC            35D4
PLRHEIGH            1E
PLRJMPSP            FFFFFFEC
PLRWIDTH            1E
PRINTN              35E4
SCBOCOL1            FF00
SCBOCOL2            BBBB00
SCBOFCOL            AAAAAA
SCBOHEIG            5A
SCBOMARG            5
SCBOPCOL            0
SCBOWIDT            8C
SCORE1              35CA
SCORE2              35D6
SCORECOL            3432CB
SCORVECT            2448
SCRCYCCT            293B
SCRHEIGH            1E0
SCRINIT             101C
SCRINTCT            293A
SCRIRQ              1
SCRISR              108C
SCRTIM              14
SCRTRAP             1
SCRUPD              109A
SCRWIDTH            280
SEPAFCOL            405711
SEPAHEIG            78
SEPAPCOL            0
SEPAWIDT            C
SESUHEIG            4
SESUWIDT            24
SETCENTER           24BE
SEVEN               26E0
SIX                 268C
SIZEINT             4
SPEEDFIL            28F6
SPEEDIA             28FA
STAATRP             1B06
STAATRP:END         1B36
STAATRP:STR0        1B38
STAATRU             1AF0
STAATRU:RTS         1B04
STACOUNT            2
STACUR              35E6
STAEMPTY            127E
STAGAME             1
STAGOLI             187E
STAGOLI:COLMUSIC    18C8
STAGOLI:END         18C6
STAGOLP             18FC
STAGOLP:RTS         1932
STAGOLU             18E2
STAGOLU:RTS         18FA
STAGOLU:SKIP        18F4
STAGOVER            3
STAGOVRI            1934
STAGOVRP            195E
STAGOVRP:PVBIA      1A18
STAGOVRP:PVBPLR     1A00
STAGOVRP:PVPPLR1    1A30
STAGOVRP:PVPPLR2    1A48
STAGOVRP:RTS        19FA
STAGOVRP:SKIP       19AC
STAGOVRP:SKIP2      19CE
STAGOVRP:STR0       1A60
STAGOVRP:STR1       1A6D
STAGOVRP:STR2       1A88
STAGOVRP:STR3       1AAB
STAGOVRP:STR4       1AC6
STAGOVRP:STR5       1ADB
STAGOVRP:VSIA       19EA
STAGOVRP:VSPLAYER   19DA
STAGOVRU            1936
STAGOVRU:RTS        195C
STAINFO             4
STAINFOI            1610
STAINFOP            1628
STAINFOP:END        16EE
STAINFOP:STR0       16F4
STAINFOP:STR1       1703
STAINFOP:STR2       171A
STAINFOP:STR3       1733
STAINFOP:STR4       1743
STAINFOP:STR5       1779
STAINFOP:STR6       17A2
STAINFOP:STR7       17C3
STAINFOU            1612
STAINFOU:NOW        1626
STAINIT             11D6
STAINTRI            1280
STAINTRO            0
STAINTRP            1412
STAINTRP:END        1582
STAINTRP:ISDINHO2   151C
STAINTRP:LSTSTRNG   154A
STAINTRP:NOMUSIC1   14FC
STAINTRP:NOMUSIC2   152E
STAINTRP:NOPLAYER   14C2
STAINTRP:NOVSIA     1494
STAINTRP:OPTIONS    1466
STAINTRP:STR0       1588
STAINTRP:STR1       1599
STAINTRP:STR2       15A6
STAINTRP:STR3       15B7
STAINTRP:STR4       15CD
STAINTRP:STR5       15E0
STAINTRP:STR6       15F3
STAINTRU            12C6
STAINTRU:CHDINHO1   13D6
STAINTRU:CHDINHO2   13E2
STAINTRU:DOWN       137E
STAINTRU:END        135C
STAINTRU:IAOPTION   13EE
STAINTRU:LEFT       139E
STAINTRU:MSCOPTION  1406
STAINTRU:NOATTRACT  12EC
STAINTRU:NOINFO     1300
STAINTRU:NOMUSIC    1324
STAINTRU:PLYOPTION  13FA
STAINTRU:RIGHT      13BA
STAINTRU:SKIP       12E6
STAINTRU:UP         135E
STANEXT             35E8
STAPLAYI            17DC
STAPLAYP            1852
STAPLAYP:RTS        187C
STAPLAYU            1806
STAPLAYU:GAMEOVER   184A
STAPLAYU:SKIP       1818
STAPLOT             124E
STAPLOT:PLTTBL      126A
START               2910
START:LOOP          2918
START:WINT          291E
STAUPD              11E8
STAUPD:DOUPD        120E
STAUPD:INITBL       1226
STAUPD:UPDTBL       123A
STPSOUND            2806
SYSINIT             1000
THREE               2590
TOUCHES             2
TWO                 253C
VERTICAL            20D4
VERTICAL:BOTZONE    2214
VERTICAL:CHECKBOT   2106
VERTICAL:CHECKTOP   20E8
VERTICAL:FIXBOT     2112
VERTICAL:LEFTZONE   21DE
VERTICAL:NOADD1     2162
VERTICAL:NOADD2     21B6
VERTICAL:NOSCORE1   216A
VERTICAL:NOSCORE2   21BE
VERTICAL:PLAYER1    21D6
VERTICAL:RGHTZONE   21EC
VERTICAL:SEPATOP    21D6
VERTICAL:TOPFIX     20F4
VERTICAL:TOPFIXED   2106
VERTICAL:TOPZONE    21FC
VERTICAL:ZONE1HIT   2132
VERTICAL:ZONE2HIT   2186
VSIA                1
VSPLAYER            0
WARN1COL            CCFF
WARN2COL            FF
WARNING1            35E0
WARNING2            35E2
ZERO                24C8
:                   0
